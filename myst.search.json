{"version":"1","records":[{"hierarchy":{"lvl1":"About me"},"type":"lvl1","url":"/about","position":0},{"hierarchy":{"lvl1":"About me"},"content":"I‚Äôm a physicist turned software engineer.\n\nI work on projects that make it easier to analyse and share massive scientific datasets. I strongly feel that progress in most fields of computational science, including crucially Climate Science, are bottlenecked by how uneccessarily hard that is to do right now.","type":"content","url":"/about","position":1},{"hierarchy":{"lvl1":"About me","lvl2":"What I do"},"type":"lvl2","url":"/about#what-i-do","position":2},{"hierarchy":{"lvl1":"About me","lvl2":"What I do"},"content":"Open Source Software and Communities for Science\n\nI contribute to a number of open-source software projects that support this aim, often as part of the \n\nPangeo Community.\n\nA few projects I‚Äôm particularly proud of or excited about, and my role in them:\n\nXarray - N-D labeled arrays and datasets in Python (core maintainer).\n\nVirtualiZarr - Cloud-Optimizes your Scientific Data as Virtual Zarr stores, using Xarray syntax (original author and lead developer).\n\nCubed - Scalable array processing with bounded memory (cheerleader, and author of the \n\nCubed-Xarray integration).\n\nFROST - Federated registry of all scientific datasets (originator - I‚Äôm trying to make this a thing).\n\nCheck out my \n\nmy GitHub page for more details.\n\nScientific Research Dilettante\n\nI have been involved with research projects in various fields, including:\n\nNuclear Fusion Plasma Physics\n\nPhysical Oceanography\n\nOcean-based Carbon Dioxide Removal\n\nHypersonic Aerothermodynamics\n\nSuperconductivity\n\nIn every field I have felt the same kinds of pain around doing computational work, which motivates my software projects.\n\nFor a list of publications and scholarly artifacts in which I‚Äôve been involved,\ncheck out \n\nmy ORCID page or \n\nmy Google Scholar page.","type":"content","url":"/about#what-i-do","position":3},{"hierarchy":{"lvl1":"About me","lvl2":"About this website"},"type":"lvl2","url":"/about#about-this-website","position":4},{"hierarchy":{"lvl1":"About me","lvl2":"About this website"},"content":"This website is my fork of \n\nChris Holdgraf‚Äôs experiment in hosting a personal website and blog via Sphinx extensions instead of using Jekyll. All credit for the website should go to him.","type":"content","url":"/about#about-this-website","position":5},{"hierarchy":{"lvl1":"About me","lvl2":"A rough timeline"},"type":"lvl2","url":"/about#about-timeline","position":6},{"hierarchy":{"lvl1":"About me","lvl2":"A rough timeline"},"content":"Below is a rough timeline of my working life so far.\n\n2025- : Engineer at Earthmover\n\n...\n\n2023-2025: Staff Scientist at [C]Worthy\n\n...\n\n2021-2023: Oceanographer at Columbia University\n\n...\n\n2017: First contributions to Xarray\n\n...\n\n2016-2021: PhD at Culham Centre for Fusion Energy\n\nMy scientific training began ...\n\n2012-2016 Studied Physics at Oxford\n\nGraduated from Oxford University with an MPhys in Physics, specializing in Theoretical and Condensed Matter Physics.","type":"content","url":"/about#about-timeline","position":7},{"hierarchy":{"lvl1":"Blog"},"type":"lvl1","url":"/blog","position":0},{"hierarchy":{"lvl1":"Blog"},"content":"Below are a few of the latest posts in my blog.\nYou can see a full list by year to the left.\n\nXarray x NASA: xarray.DataTree for hierarchical data structures\n\n\n\n(Originally posted on the [Xarray blog](https://xarray.dev/blog/datatree).)\n\n\n[`xarray.DataTree`](https://docs.xarray.dev/en/stable/user-guide/data-structures.html#datatree) has been [released](https://github.com/pydata/xarray/discussions/9680) in [v2024.10.0](https://github.com/pydata/xarray/releases/tag/v2024.10.0), and the prototype [`xarray-contrib/datatree` repository](https://github.com/xarray-contrib/datatree) archived, after collaboration between the xarray team and the [NASA ESDIS project](https://www.earthdata.nasa.gov/about/esdis). ü§ù\n\n\nThe DataTree concept allows for organizing heterogeneous collections of scientific data in the same way that a nested directory structure facilitates organizing\n\nDate: December 19, 2024 | Author: Tom Nicholas","type":"content","url":"/blog","position":1},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures"},"type":"lvl1","url":"/blog/2024/datatree","position":0},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures"},"content":"(Originally posted on the \n\nXarray blog.)","type":"content","url":"/blog/2024/datatree","position":1},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"tl;dr"},"type":"lvl2","url":"/blog/2024/datatree#tl-dr","position":2},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"tl;dr"},"content":"xarray.DataTree has been \n\nreleased in \n\nv2024.10.0, and the prototype \n\nxarray-contrib/datatree repository archived, after collaboration between the xarray team and the \n\nNASA ESDIS project. ü§ù","type":"content","url":"/blog/2024/datatree#tl-dr","position":3},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Why trees?"},"type":"lvl2","url":"/blog/2024/datatree#why-trees","position":4},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Why trees?"},"content":"The DataTree concept allows for organizing heterogeneous collections of scientific data in the same way that a nested directory structure facilitates organizing large numbers of files on disk. It does so in a way that preserves common structure between data in the collections, such as aligned arrays and common coordinates.\n\nFor those familiar with netCDF4/Zarr groups, a DataTree can also be thought of as an in-memory representation of a file‚Äôs group structure. Xarray users have been \n\nasking for a way to handle multiple netCDF4 groups \n\nsince at least 2016!\n\nDataTree enables xarray to be used for various new use cases, including:\n\nClimate model intercomparisons,\n\nMulti-scale image pyramids, e.g. in \n\ngenomics,\n\nOrganising heterogenous data, such as satellite observations and model simulations.\n\nSimple and convenient access to entire hierarchical files.","type":"content","url":"/blog/2024/datatree#why-trees","position":5},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"What is a DataTree exactly?"},"type":"lvl2","url":"/blog/2024/datatree#what-is-a-datatree-exactly","position":6},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"What is a DataTree exactly?"},"content":"The new high-level container class xarray.DataTree acts like a tree of linked xarray.Dataset objects, with alignment enforced between arrays in parent and child nodes, but not between those in sibling nodes. It can be written to and opened from formats containing multiple groups, such as netCDF4 files and Zarr stores.\n\nFor more details please see the \n\nhigh-level description, the \n\ndedicated page on hierarchical data, and the \n\nsection on IO with groups in the xarray documentation.","type":"content","url":"/blog/2024/datatree#what-is-a-datatree-exactly","position":7},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Deprecation"},"type":"lvl2","url":"/blog/2024/datatree#deprecation","position":8},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Deprecation"},"content":"If you previously had used the datatree.DataTree prototype in the \n\nxarray-contrib/datatree repository, that has now been archived and will no longer be supported. Instead we encourage you to migrate to the implementation of DataTree that you can import from xarray, following the \n\nmigration guide.","type":"content","url":"/blog/2024/datatree#deprecation","position":9},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Big moves"},"type":"lvl2","url":"/blog/2024/datatree#big-moves","position":10},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Big moves"},"content":"This was a big feature addition! For a \n\ndecade there have been 3 core public xarray data structures, now there are 4: \n\nVariable, \n\nDataArray, \n\nDataset, and now \n\nDataTree.\n\nDatatree represents arguably one of the largest new features added to xarray in 10 years - the migration of the existing prototype alone added >10k lines of code across \n\n80 pull requests, and the resulting datatree implementation now contains contributions from at least 25 people.\n\nWe also had to resolve some really \n\ngnarly design questions to make it work in a way we were happy with.","type":"content","url":"/blog/2024/datatree#big-moves","position":11},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"How did this happen?"},"type":"lvl2","url":"/blog/2024/datatree#how-did-this-happen","position":12},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"How did this happen?"},"content":"DataTree didn‚Äôt get implemented overnight - it was a multi-year effort that took place in a number of steps, and there are some lessons to be learned from the story.\n\nIn March 2021, the xarray team submitted a \n\nfunding proposal to the \n\nChan-Zuckerberg Initiative to develop ‚ÄúTreeDataset‚Äù, citing bioscience use cases such as \n\nmicroscopy image pyramids. Unfortunately whilst we‚Äôve been lucky to \n\nreceive CZI funding before, on this occasion we didn‚Äôt win money to work on the datatree idea.\n\nIn the absence of dedicated funding for datatree, Tom then used some time whilst at the \n\nClimate Data Science Lab at Columbia University to take a initial stab at the design in August 2021 - writing the first implementation on an overnight Amtrak! This simple prototype was released as a separate package in the \n\nxarray-contrib/datatree repository, and steadily gained a small community of intrepid users. It was driven partly by the use case of \n\nclimate model intercomparison datasets.\n\nA separate repository was chosen for speed of iteration, and to be able to more easily \n\nmake changes without worrying as much about \n\nbackwards compatibility as code in xarray‚Äôs main repo does. However the separate repo meant that the prototype datatree library was not fully integrated with xarray‚Äôs main codebase, limiting possible features and requiring fragile dependencies on private xarray internals.\n\nThe prototype then sat there for 2 years, until the NASA ESDIS team approached the xarray core team in August 2023. ESDIS devs wanted the ability to work with entire hierarchical files, and had experimented with the prototype version of datatree, but they wanted datatree functionality to be migrated upstream into xarray‚Äôs main repository so there would be more guarantees of long-term API stability and support.\n\nAmazingly NASA were able to offer the time of 3 engineers: Owen (NASA EOSDIS Evolution and Development 3 (EED-3) contract), Matt (NASA National Snow and Ice Data Center Distributed Active Archive Center (NSIDC)), and Eni (Goddard Earth Sciences Data and Information Services Center (GES DISC)). So starting in late 2023 the NASA trio worked on migrating the prototype datatree into xarray upstream, with regular supervision from Tom, Justus, and Stephan (existing xarray core team).\n\nThis second stage of development allowed us to reduce the bus factor on the datatree code, sanity check the original approach, and it gave us a chance to make some significant improvements to the design without backwards-compatibility concerns (for example enabling the \n\nnew ‚Äúcoordinate inheritance‚Äù feature).","type":"content","url":"/blog/2024/datatree#how-did-this-happen","position":13},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Lessons for future collaborations"},"type":"lvl2","url":"/blog/2024/datatree#lessons-for-future-collaborations","position":14},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Lessons for future collaborations"},"content":"This development story is different from the more typical scientific grant funding model - how did that work out for us?\n\nThe scientific grant model for funding software expects you to present a full idea in a proposal, wait 6-12 months to hopefully get funding for it, then implement the whole thing during the grant period. In contrast datatree evolved over a gradual process of moving from ideas to hacky prototype to robust implementation, with big time gaps for user feedback and experimentation. The migration was completed by developer-users who actually wanted the feature, rather than grant awardees working in service of a separate and maybe-only-theoretical userbase.\n\nOverall while the migration effort took longer than anticipated we think it worked out quite well!","type":"content","url":"/blog/2024/datatree#lessons-for-future-collaborations","position":15},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl3":"Pros","lvl2":"Lessons for future collaborations"},"type":"lvl3","url":"/blog/2024/datatree#pros","position":16},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl3":"Pros","lvl2":"Lessons for future collaborations"},"content":"Zero overhead - the existing xarray team did not to have to write a proposal to get developer time, and there was literally zero paperwork inflicted (on them at least).\n\nCertainty of funding - writing grant proposals is a lottery, so the time invested up front doesn‚Äôt even come with any certainty of funding. Collaborating with another org has a much higher chance of actually leading to more money being available for developer time.\n\nTime efficient - an xarray core dev spending 10% of their time advising someone who is less familiar with the codebase but has more time is an efficient use of relative expertise.\n\nBus factor - the new contributors reduced the bus factor on the datatree code dramatically.\n\nUser-driven Development - it makes sense to have actual interested user communities involved in development.\n\nStakeholder representation - after officially adding Owen, Matt and Eni to the \n\nxarray core team, the NASA ESDIS project has some direct representation in, insider understanding of, and stake in continuing to support the xarray project.","type":"content","url":"/blog/2024/datatree#pros","position":17},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl3":"Cons","lvl2":"Lessons for future collaborations"},"type":"lvl3","url":"/blog/2024/datatree#cons","position":18},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl3":"Cons","lvl2":"Lessons for future collaborations"},"content":"Not everyone got direct funding - It‚Äôs less ideal that Tom, Justus, and Stephan didn‚Äôt get direct funding for their supervisory work. In future it might be better to have one of the paid people at the contributing org already be a core xarray team member, or perhaps find some way to pay them as a consultant.\n\nTricky to accurately scope - The duration of required work was tricky to estimate in advance, and we didn‚Äôt want to ‚Äújust ship it‚Äù. We hold the xarray project to high standards and backwards compatibility promises so we want to ensure that any publicly released features don‚Äôt compromise on quality.\n\nThis contributing model is more similar to how open-source software has historically been supported by industry, but perhaps because xarray is primarily developed and used by the scientific community we tend to default to more grant-based funding models.\n\nOverall we think this type of collaboration could work again in future! So if there is an xarray or xarray-adjacent feature your organisation would like to see, please reach out to us.","type":"content","url":"/blog/2024/datatree#cons","position":19},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Go try out DataTree"},"type":"lvl2","url":"/blog/2024/datatree#go-try-out-datatree","position":20},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Go try out DataTree"},"content":"Please try datatree out! The hierarchical structure is potentially useful to any xarray users who work with more than one dataset at a time. Simply do from xarray import DataTree or call \n\nopen_datatree(...) on a netCDF4 file / Zarr store containing multiple groups.\n\nBe aware that as xarray.DataTree is still new there will likely be some bugs lurking or places that performance could be improved, as well as as-yet \n\nunimplemented features (as there always are)!","type":"content","url":"/blog/2024/datatree#go-try-out-datatree","position":21},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Thanks"},"type":"lvl2","url":"/blog/2024/datatree#thanks","position":22},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Thanks"},"content":"A number of other people also \n\ncontributed to datatree in various ways - particular shoutout to \n\nAlfonso Ladino and \n\nEtienne Schalk for their dedicated attendance at many of the \n\nweekly migration meetings!","type":"content","url":"/blog/2024/datatree#thanks","position":23},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Funding Acknowledgements"},"type":"lvl2","url":"/blog/2024/datatree#funding-acknowledgements","position":24},{"hierarchy":{"lvl1":"Xarray x NASA: xarray.DataTree for hierarchical data structures","lvl2":"Funding Acknowledgements"},"content":"Owen, Eni, and Matt were able to contribute development time as part of the \n\nNASA ESDIS project.\n\nTom was supported first by the Gordon and Betty Moore foundation as part of Ryan Abernathey‚Äôs \n\nClimate Data Science Lab at Columbia University, then later by various funders for a fraction of his time through \n\n[C]Worthy.","type":"content","url":"/blog/2024/datatree#funding-acknowledgements","position":25},{"hierarchy":{"lvl1":"Hi, I‚Äôm Tom Nicholas üëã"},"type":"lvl1","url":"/","position":0},{"hierarchy":{"lvl1":"Hi, I‚Äôm Tom Nicholas üëã"},"content":"\n\nA bit about me...\n\nüíº Engineer @ \n\nEarthmover\n\nüåé Active member of the \n\nPangeo Community\n\nüåï Core developer of \n\nXarray\n\nüß™ PhD in fusion plasma physics from \n\nUni. York & \n\nCCFE\n\nI also work on several other \n\nopen-source projects for science.\n\nAbout me ‚ÑπÔ∏è :::{grid-item-card}\n:link: projects.md\nProjects I've worked on üîß\n::: \n\nMy blog ‚úçÔ∏è","type":"content","url":"/","position":1},{"hierarchy":{"lvl1":"Hi, I‚Äôm Tom Nicholas üëã","lvl2":"Recent blog posts"},"type":"lvl2","url":"/#recent-blog-posts","position":2},{"hierarchy":{"lvl1":"Hi, I‚Äôm Tom Nicholas üëã","lvl2":"Recent blog posts"},"content":"Xarray x NASA: xarray.DataTree for hierarchical data structures\n\n\n\n(Originally posted on the [Xarray blog](https://xarray.dev/blog/datatree).)\n\n\n[`xarray.DataTree`](https://docs.xarray.dev/en/stable/user-guide/data-structures.html#datatree) has been [released](https://github.com/pydata/xarray/discussions/9680) in [v2024.10.0](https://github.com/pydata/xarray/releases/tag/v2024.10.0), and the prototype [`xarray-contrib/datatree` repository](https://github.com/xarray-contrib/datatree) archived, after collaboration between the xarray team and the [NASA ESDIS project](https://www.earthdata.nasa.gov/about/esdis). ü§ù\n\n\nThe DataTree concept allows for organizing heterogeneous collections of scientific data in the same way that a nested directory structure facilitates organizing\n\nDate: December 19, 2024 | Author: Tom Nicholas","type":"content","url":"/#recent-blog-posts","position":3}]}
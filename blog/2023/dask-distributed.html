<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration - Welcome</title><meta property="og:title" content="Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration - Welcome"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><meta name="image" content="/build/f8821db67c2a5f1f07b570e6bed342cc.png"/><meta property="og:image" content="/build/f8821db67c2a5f1f07b570e6bed342cc.png"/><link rel="stylesheet" href="/build/_assets/app-HG4THSM4.css"/><link rel="stylesheet" href="/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/favicon.ico"/><link rel="stylesheet" href="/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Tom Nicholas</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"><div class="relative inline-block mx-2 grow-0"><a class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75" href="/about">About</a></div><div class="relative inline-block mx-2 grow-0"><a aria-current="page" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 border-b border-stone-200" href="/blog">Blog</a></div></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R3iop:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode." aria-label="Toggle theme between light and dark mode."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white"><a class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded" href="/about">About</a><a aria-current="page" class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded active" href="/blog">Blog</a></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white"><a title="Welcome" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/">Welcome</a><a title="About me" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/about">About me</a><div data-state="open" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a title="Blog" aria-current="page" class="block break-words focus:outline outline-blue-200 outline-2 rounded py-2 grow font-semibold text-blue-800 dark:text-blue-200 active" href="/blog">Blog</a><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rfd8p:" aria-expanded="true" data-state="open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="open" id="radix-:Rfd8p:" class="pl-3 pr-[2px] collapsible-content"><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2025" class="block break-words rounded py-2 grow cursor-pointer">2025</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R6vd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R6vd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2024" class="block break-words rounded py-2 grow cursor-pointer">2024</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Ravd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Ravd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="open" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2023" class="block break-words rounded py-2 grow font-semibold text-blue-800 dark:text-blue-200 cursor-pointer">2023</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Revd8p:" aria-expanded="true" data-state="open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="open" id="radix-:Revd8p:" class="pl-3 pr-[2px] collapsible-content"><a title="Cubed: Bounded-memory serverless array processing in xarray" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/blog/2023/cubed-xarray">Cubed: Bounded-memory serverless array processing in xarray</a><a title="Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration" aria-current="page" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg bg-blue-300/30 active" href="/blog/2023/dask-distributed">Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration</a></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2022" class="block break-words rounded py-2 grow cursor-pointer">2022</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rivd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rivd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2020" class="block break-words rounded py-2 grow cursor-pointer">2020</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rmvd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rmvd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2019" class="block break-words rounded py-2 grow cursor-pointer">2019</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rqvd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rqvd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></div></div></nav></div><div class="flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-grow"></div><a href="https://github.com/TomNicholas/tomnicholas.github.io" title="GitHub Repository: TomNicholas/tomnicholas.github.io" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rd4fop:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration</h1><header class="mt-4 not-prose"><div><span class="font-semibold text-sm inline-block"><button class="focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R3kfop:" data-state="closed">Tom Nicholas</button><a class="ml-1" href="https://orcid.org/0000-0002-2176-0530" target="_blank" rel="noopener noreferrer" title="ORCID (Open Researcher and Contributor ID)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1rem" height="1rem" class="inline-block text-gray-400 hover:text-[#A9C751] -translate-y-[0.1em]"><path d="M21.8 12c0 5.4-4.4 9.8-9.8 9.8S2.2 17.4 2.2 12 6.6 2.2 12 2.2s9.8 4.4 9.8 9.8zM8.2 5.8c-.4 0-.8.3-.8.8s.3.8.8.8.8-.4.8-.8-.3-.8-.8-.8zm2.3 9.6h1.2v-6h1.8c2.3 0 3.3 1.4 3.3 3s-1.5 3-3.3 3h-3v1.1H9V8.3H7.7v8.2h5.9c3.3 0 4.5-2.2 4.5-4.1s-1.2-4.1-4.3-4.1h-3.2l-.1 7.1z"></path></svg></a></span></div></header><div class="flex mt-2 text-sm font-light"><time dateTime="2023-01-04" class="">January 4, 2023</time></div></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><p>By Tom Nicholas and Ryan Abernathey</p><p>(Originally posted on the <a target="_blank" rel="noreferrer" href="https://medium.com/pangeo/dask-distributed-and-pangeo-better-performance-for-everyone-thanks-to-science-software-63f85310a36b" class="">Pangeo Medium blog</a>.)</p><h2 id="summary" class="relative group"><span class="heading-text">Summary</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#summary" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><ul><li>Pangeo aimed to make big data analysis easy for scientists</li><li>But awkwardly dask.distributed would fail at large scales…</li><li>It’s now fixed, hooray for scientist-developer collaboration!</li></ul><h2 id="the-grand-vision" class="relative group"><span class="heading-text">The Grand Vision</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#the-grand-vision" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The <a target="_blank" rel="noreferrer" href="https://medium.com/pangeo/announcing-the-climate-data-science-lab-funded-by-the-moore-foundation-4bc4314ac02d" class="">Climate Data Science Lab</a> (funded by the Gordon and Betty Moore Foundation) was founded to create a positive feedback loop between practicing climate scientists and developers of open-source scientific software.
Motivated by the explosion in the size of scientific datasets needing analysis, the idea was to improve the software tools available in the <a target="_blank" rel="noreferrer" href="https://pangeo.io/packages.html" class="">Pangeo stack</a> by creating a group with people who could both use the software to do scientific research and write the necessary code.</p><p>For some software packages, this approach of having scientist-developer contributors has worked pretty well.
In particular Xarray and Zarr have both benefited hugely from having a tight loop between users and developers, or even a core development team containing users who are practicing scientists.</p><h2 id="dask-as-a-linchpin" class="relative group"><span class="heading-text">Dask as a linchpin</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dask-as-a-linchpin" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Central to the <a target="_blank" rel="noreferrer" href="https://pangeo.io/about.html" class="">Pangeo vision</a> was the ability for users to easily scale up analysis from data small enough to fit on a single machine to workloads requiring distributed systems, analyzing many terabytes or even petabytes of data.
As something of a scientist myself, this would be transformative — all we really want out of computers is to write down our analysis method clearly, and then simply apply it to all of our available data.</p><p>Enter Dask, a parallel computing library which plugs seamlessly into Xarray and has a distributed scheduler capable of of computation across many nodes.
Dask was mission critical — as the Pangeo website says:</p><blockquote><p>“Dask is the key to the scalability of the Pangeo platform”.</p></blockquote><img id="ZrOHdx3dql" style="margin:0 auto" src="/build/f8821db67c2a5f1f07b570e6bed342cc.png" data-canonical-url="https://i.imgur.com/fUOaKiX.png"/><h3 id="perennial-performance-problems" class="relative group"><span class="heading-text">Perennial performance problems</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#perennial-performance-problems" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Unfortunately, as the Pangeo community of computational scientists has pushed this tool stack to larger and larger scales, we have sometimes found that dask often did not perform the way we hoped.
In theory, we could prototype an analysis on small data, then hand it off to dask, whose distributed execution engine would apply it smoothly in parallel to much larger datasets.
If the analysis algorithm is straightforward to parallelize (e.g. applying the same function to every independent time slice of a dataset) then it should simply work, applying the same algorithm chunk-by-chunk in a streaming-like fashion.
To do bigger science you would just have to fork out more cloud computing credits.</p><p>In reality, what sometimes happens is that analysis workflows begin to stall at large scales.
In particular, the live dask task dashboard would show the dreaded orange bars, indicating that the memory of dask workers was becoming saturated, and they were being forced to spill data to disk.
The spilling would then massively slow down task execution on those workers, which often caused your computation to slow to an endless crawl, and in the worst case kill your workers.</p><img id="VJdyuDIHXQ" style="margin:0 auto" src="/build/30b8675245d6cc3089fe6bb77fdd2e9c.png" alt="dask dashboard screenshot" data-canonical-url="https://i.imgur.com/MLYEohr.png"/><p>This scalability issue became a <a target="_blank" rel="noreferrer" href="https://discourse.pangeo.io/t/best-practices-to-go-from-1000s-of-netcdf-files-to-analyses-on-a-hpc-cluster/588/3" class="">well-known problem</a> in the pangeo community, to the point where we had common recommendations for coping strategies, employing such advanced solutions as <a target="_blank" rel="noreferrer" href="https://discourse.pangeo.io/t/dask-not-completing-large-operations-on-sose-data/2788/4" class="">“just get more RAM”</a>, or <a href="https://github.com/dask/distributed/issues/6360#issuecomment-1129484190" class="italic" target="_blank" rel="noreferrer" data-state="closed">“break the job up before feeding to the scheduler”</a>.</p><p>The issue was of course <a href="https://github.com/dask/distributed/issues/2602" class="italic" target="_blank" rel="noreferrer" data-state="closed">reported upstream</a>, but the discussion languished over multiple years, for two big reasons.
Firstly, the problem with the distributed scheduler’s performance was very hard to diagnose, especially for the scientists encountering it, none of whom were dask core developers.
Frustratingly, there seemed to be a gap between the theoretical performance of the scheduler on artificial test cases and the real-world performance on actual scientific workloads.
Invoking the mantra of <em>“Can you please simplify this to a minimum failing example?”</em> didn’t help, as it was very hard for non-expert dask users to “dumb down” their full analysis problems.</p><p>Secondly, <a href="https://github.com/dask/distributed/pull/4967" class="italic" target="_blank" rel="noreferrer" data-state="closed">early attempts to fix the problem</a> did not get at the root cause.
There were multiple scheduling inefficiencies known to the Dask devs which might be relevant, but after these were fixed the performance <a href="https://github.com/dask/distributed/issues/2602#issuecomment-891156357" class="italic" target="_blank" rel="noreferrer" data-state="closed">only improved marginally</a> in many of the Pangeo use cases.</p><h3 id="attempting-to-analyse-ocean-data-with-xgcm-and-dask" class="relative group"><span class="heading-text">Attempting to analyse ocean data with xGCM and dask</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#attempting-to-analyse-ocean-data-with-xgcm-and-dask" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>I was one of the scientists frustrated by being unable to understand why Dask would work so beautifully on subsets of my dataset, but failed when I ran the same analysis at full scale.
My analysis problem was to use the <a target="_blank" rel="noreferrer" href="https://github.com/xgcm/xgcm" class="">xGCM package</a> to apply vector calculus operations in a <a target="_blank" rel="noreferrer" href="https://xgcm.readthedocs.io/en/latest/grids.html" class="">grid-aware manner</a> to a very large oceanographic simulation <a target="_blank" rel="noreferrer" href="https://catalog.pangeo.io/browse/master/ocean/LLC4320/" class="">dataset</a> called <a target="_blank" rel="noreferrer" href="https://online.kitp.ucsb.edu/online/blayers18/menemenlis/pdf/Menemenlis_BLayers18_KITP.pdf" class="">LLC4320</a>.
The inability to analyse this particular Petabyte-scale dataset was actually one of the original <a target="_blank" rel="noreferrer" href="https://medium.com/pangeo/petabytes-of-ocean-data-part-1-nasa-ecco-data-portal-81e3c5e077be" class="">motivations that led to Pangeo</a>, and my project was supposed to show that with the power of this full-stack solution we could now do oceanographic science at a scale not previously possible.</p><p>Dask encodes computations into a directed acyclic graph (DAG) of tasks to be executed by the scheduler, and in this respect our computation was not particularly unusual.
We needed to open a large number of independent chunks of data (the ocean state at different times), apply a function to each (e.g. take the divergence of the surface velocity of the ocean), then save each of these chunks back out.
However it had some subtleties that would prove important.
In particular xGCM’s new <a target="_blank" rel="noreferrer" href="https://xgcm.readthedocs.io/en/latest/grid_ufuncs.html" class="">“grid ufuncs”</a> feature has an option to apply boundary conditions by padding one side of an array before applying the vector calculus operation.
What this meant for dask is that the task graph was slightly more complex than a typical test case (e.g. compared to using <a target="_blank" rel="noreferrer" href="https://docs.xarray.dev/en/stable/generated/xarray.apply_ufunc.html" class="">xarray’s <code>apply_ufunc</code></a>), with small side chains that would get merged back in during the course of the computation.</p><img id="Rj71wRIfR2" style="margin:0 auto" src="/build/2d1423931fc0708d1f7e04d98b663495.png" data-canonical-url="https://i.imgur.com/cbkVd7F.png"/><p>Suspecting that these side chains were confusing the scheduler somehow, we tried various suggestions to eliminate these peripheral tasks, trying to simplify the topology of the overall graph, such as <a target="_blank" rel="noreferrer" href="https://speakerdeck.com/tomnicholas/scipy-2022-can-we-analyse-the-largest-ocean-simulation-ever?slide=25" class="">task fusion</a>, <a href="https://github.com/pydata/xarray/pull/6566" class="italic" target="_blank" rel="noreferrer" data-state="closed">inlining</a>, and <a target="_blank" rel="noreferrer" href="https://distributed.dask.org/en/stable/locality.html#data-scatter" class="">scattering</a>.
Alas none of these fixes banished the orange bars.</p><p>A common feature of all the failing workloads appeared to be the loading in of more data than expected.
Even for almost “embarrasingly-parallel” computation graphs, we could see that many <a href="https://github.com/dask/distributed/issues/2602#issue-431288347" class="italic" target="_blank" rel="noreferrer" data-state="closed">more data-opening tasks were being performed than data-analysing tasks</a>, meaning that dask was over-eagerly loading in more data than it needed, overwhelming the workers.</p><h3 id="a-fix-is-found" class="relative group"><span class="heading-text">A fix is found!</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#a-fix-is-found" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>I <a href="https://github.com/dask/distributed/issues/6360" class="italic" target="_blank" rel="noreferrer" data-state="closed">reported this issue upstream</a>, resurrecting a <a href="https://github.com/dask/distributed/issues/2602" class="italic" target="_blank" rel="noreferrer" data-state="closed">previous discussion</a>, along with a half-baked suggestion of how we might fix it in the scheduler.
I included some of our task graphs, and <a target="_blank" rel="noreferrer" href="https://github.com/gjoseph92" class="">Gabe Joseph</a> of Coiled suggested a quick way to try out my naive suggestion.</p><p>A breakthrough came when, after iterating back and forth, we decided to take our efforts to the <a target="_blank" rel="noreferrer" href="https://docs.coiled.io/user_guide/support.html" class="">Coiled Slack</a>, where Gabe could have me run test versions of <code>dask.distributed</code> on their <a target="_blank" rel="noreferrer" href="https://www.coiled.io/product-overview" class="">cloud platform</a>.
We realised that the xGCM analysis could reproduce the over-eager memory consumption problem even in small cases - now we had a minimum failing example!
It appeared that the side chains were enough of an added complexity to the task graph to make expose a race condition in the scheduling process, which allowed more data-loading tasks to run than necessary.
This explained how artifical test examples could perform smoothly whilst users still reported failures in real-world cases!</p><p>Now armed with the understanding to reproduce the problem, as well as motivating cases for fixing it, Gabe went off to <a href="https://github.com/dask/distributed/pull/6614" class="italic" target="_blank" rel="noreferrer" data-state="closed">solve it comprehensively</a>.
I can’t thank him and the other dask developers enough for the effort they put in here.
They made a <a href="https://github.com/coiled/coiled-runtime/pull/243" class="italic" target="_blank" rel="noreferrer" data-state="closed">set of test problems</a>, including <a href="https://github.com/coiled/coiled-runtime/issues/174" class="italic" target="_blank" rel="noreferrer" data-state="closed">one based on my xGCM case</a>, and created an opt-in flag so that the <a target="_blank" rel="noreferrer" href="https://github.com/dask/distributed/discussions/7128" class="">Pangeo users could try out their solution</a> in the wild.
(You can read an in-depth explanation of exactly what the problem with “root task overproduction” was and how it was solved in <a target="_blank" rel="noreferrer" href="https://www.coiled.io/blog/reducing-dask-memory-usage" class="">Gabe’s post on the Coiled blog</a>.)</p><p>Various community members were now able to test it, including pangeo software-developing scientists with a interest in pushing dask performance as far as we can, such as <a target="_blank" rel="noreferrer" href="https://github.com/dask/distributed/discussions/7128#discussioncomment-3910328" class="">myself</a>, <a target="_blank" rel="noreferrer" href="https://github.com/dask/distributed/discussions/7128#discussioncomment-3863838" class="">Deepak Cherian</a>, and <a target="_blank" rel="noreferrer" href="https://github.com/dask/distributed/discussions/7128#discussioncomment-3964014" class="">Julius Busecke</a>.
We found that this improved task allocation algorithm worked so much better on essentially all of our varied types of geospatial workloads, and the opt-in flag has now become the default in dask distributed version 2022.11.0!</p><h3 id="impact" class="relative group"><span class="heading-text">Impact</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#impact" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>The difference in performance is massive for affected workloads - not only did it banish the dreaded orange bars by lowering the peak memory usage, but computations often finished faster too!
The benefits apply across a wide range of workloads, not just those that motivated solving the problem in the first place.</p><p>I think it’s fair to say that this fix represents a “leap in productivity across the entire field” [of pangeo-using scientists], by speeding up or enabling computations that were either a pain to run before or flat-out impossible.
This fulfils one of the <a target="_blank" rel="noreferrer" href="https://medium.com/pangeo/announcing-the-climate-data-science-lab-funded-by-the-moore-foundation-4bc4314ac02d" class="">original stated aims of the Climate Data Science lab</a>, substantiating the idea that collaborations between practicising scientists / research software engineers (Pangeo) and industry software developers (Coiled) can lead to big benefits for both.
In fact the benefits spill over into other fields of science too, as the Xarray + Dask combo is domain-agnostic.</p><h3 id="lessons" class="relative group"><span class="heading-text">Lessons</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#lessons" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>What can we learn from this?</p><ol start="1"><li><strong>Users found real problems</strong></li></ol><p>Firstly, it emphasises the importance of listening to users.
<a target="_blank" rel="noreferrer" href="https://www.coiled.io/blog/prioritizing-pragmatic-performance-for-dask" class="">Matt Rocklin mentioned this recently</a>, explaining why the dask team try to prioritise solving problems that are consistently reported by users, rather than jumping on easy-to-identify shiny new ways to speed up parts of the code that might not actually be a bottleneck.</p><ol start="2"><li><strong>Scientist-dev “road-testers” identified the core issue</strong></li></ol><p>Secondly, scientist-developers like myself were able to identify problems that affected average scientist-users, but average users could not have fixed (or even identified).
Clearly it’s worthwhile to fund a few “Research Software Engineers” whose focus is improving software for scientists rather than only publishing scientific papers.
(Another example of this in the Pangeo sphere is Deepak Cherian’s work on <a target="_blank" rel="noreferrer" href="https://twitter.com/cherian_deepak/status/1461031799988133899" class="">improving groupby operations in dask</a>.)
The key point here is that if the devs are also users, they are motivated to focus on hunting down the problems that all users face.</p><ol start="3"><li><strong>Minimum reproducible example extremely important, but also hard in a full-stack context</strong></li></ol><p>Without a <a target="_blank" rel="noreferrer" href="https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports" class="">minimal, complete, reproducible example</a> this problem did not get solved.
However, it took a long time for such an example to emerge for a piece of software as complex as dask.
The problem was too subtle to be captured by a simple toy example, but real example workflows were generally too complex to clearly point to where the problem was coming from.</p><p>I’m not entirely sure what the solution is here, but perhaps galleries of examples of intermediate complexity could be more easily adapted into failing problems than starting from either toy problems or real-world cases.</p><p>It’s also arguably more important that a failing example is reproducible than it is minimal, but that’s still challenging in a real scientific context.
We should be aiming to make all work on Pangeo cloud esily reproducible anyway, whether it’s polished final results or fail cases.
This means making it simpler to access data regardless of format (especially requester-pays buckets), on a common cloud compute platform, and full control over software environments to install experimental versions of packages.</p><ol start="4"><li><strong>Automated performance testing and full-stack tests crucial</strong></li></ol><p>Another aspect of the problem was users seeing poor performance but not having a rigorous way to report it. Every example was somewhat anecdotal, home-brewed, awkward to recreate, and not necessarily convincingly benchmarked.
A set of automated full-stack performance tests (i.e. “integration testing”) might have flagged this problem and narrowed it down much earlier.
This idea has been <a target="_blank" rel="noreferrer" href="https://github.com/pangeo-data/pangeo-integration-tests" class="">proposed for the pangeo stack before</a>, but not yet fully implemented.
We could also work with Coiled to get more Pangeo use cases into their automated performance tests.</p><ol start="5"><li><strong>Academia-industry collaboration around open source can be a very productive pattern</strong></li></ol><p>The Pangeo community has always strived to integrate people from academia, government agencies, and private industry.
In particular, we have always written into our grants consulting and services from open-source companies like <a target="_blank" rel="noreferrer" href="https://anaconda.org/" class="">Anaconda</a>, <a target="_blank" rel="noreferrer" href="https://www.bopen.eu/" class="">B-Open</a>, <a target="_blank" rel="noreferrer" href="https://quansight.com/" class="">Quansight</a>, and <a target="_blank" rel="noreferrer" href="https://www.coiled.io/" class="">Coiled</a> (just to name a few).
These arrangements have given our scientist-developers access to specialized software engineering expertise that is hard to hire for internally.
Conversely, the analysis problems that scientists face tend to really push the boundaries of what is possible, providing interesting and useful challenges to motivate software development.
This relationship worked well in this case, and we think it can be replicated more broadly.</p><h3 id="next-steps-for-this-stack" class="relative group"><span class="heading-text">Next steps for this stack?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#next-steps-for-this-stack" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>When working with big tabular data in the cloud, an analyst has a wide range of software choices, from data warehouses like Snowflake and BigQuery to open-source query engines like Spark, Presto, Trino, Dask Dataframe, DuckDB, etc.
The prevalance of SQL in this world means that users can pretty easily take the same code (SQL queries) and run it on different back-ends.
This friendly competition has driven a lot of innovation and performance improvements.</p><p>For big arrays, for a long time Dask’s Array module has been the only game in town. While we love Dask, we think it’s also great to see alternative array-oriented “query engines” coming online--it’s a sign that scientific computing in the cloud is maturing. In particular, we’re excited about:</p><ul><li><a target="_blank" rel="noreferrer" href="https://github.com/google/xarray-beam" class="">Xarray Beam</a>, a framework based around <a target="_blank" rel="noreferrer" href="https://beam.apache.org/" class="">Apache Beam</a>,</li><li><a target="_blank" rel="noreferrer" href="https://github.com/tomwhite/cubed/" class="">Cubed</a>, a serverless framework inspired by <a target="_blank" rel="noreferrer" href="https://github.com/pangeo-data/rechunker/" class="">Rechunker</a>,</li><li><a target="_blank" rel="noreferrer" href="https://github.com/Python-for-HPC/ramba" class="">Ramba</a>, which parallelizes numba-compiled functions using <a target="_blank" rel="noreferrer" href="https://www.ray.io/ray-core" class="">Ray</a>,</li><li><a target="_blank" rel="noreferrer" href="https://github.com/Bears-R-Us/arkouda" class="">Arkouda</a>, which wraps a parallel implementation in the domain-specific language <a target="_blank" rel="noreferrer" href="https://chapel-lang.org/" class="">Chapel</a>.</li></ul><p>Hopfeully some of these new projects can explore new algorithms and architectures that can drive further improvements in Dask, resulting in faster time-to-science and more efficient use of computing resources.</p><p>If you’re interested in exploring the nascent area of distributed array computing in the cloud, we invite you to join the <a target="_blank" rel="noreferrer" href="https://discourse.pangeo.io/t/new-working-group-for-distributed-array-computing/2734" class="">Pangeo Working group on Distributed Arrays</a>.</p><p><strong>Acknowledgements:</strong> Thanks for Gabe for useful comments on a draft of this post, as well as to Gabe, Florian Jetter, and the rest of the dask dev team for the fix!</p><div></div><div class="flex pt-10 mb-10 space-x-4"><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/blog/2023/cubed-xarray"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="text-xs text-gray-500 dark:text-gray-400">2023</div>Cubed: Bounded-memory serverless array processing in xarray</div></div></a><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/blog/2022/easy-ipcc-datatree"><div class="flex h-full align-middle"><div class="flex-grow"><div class="text-xs text-gray-500 dark:text-gray-400">2022</div>Easy IPCC part 1: Multi-Model Datatree</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></main></article><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/build/_shared/chunk-IZFMW3M4.js"/><link rel="modulepreload" href="/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/build/_shared/chunk-CPTH56EW.js"/><link rel="modulepreload" href="/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/build/_shared/chunk-S4SWV34C.js"/><link rel="modulepreload" href="/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/build/root-QGLRP2PL.js"/><link rel="modulepreload" href="/build/_shared/chunk-CB3BH7WY.js"/><link rel="modulepreload" href="/build/routes/$-7JYT5576.js"/><script>window.__remixContext = {"url":"/blog/2023/dask-distributed","state":{"loaderData":{"root":{"config":{"version":1,"myst":"1.3.25","options":{"favicon":"/build/profile-color-circle-ca8fbded50b8385ad3ee7f612833be43.png","logo_text":"Tom Nicholas","folders":true},"nav":[{"title":"About","url":"/about"},{"title":"Blog","url":"/blog"}],"actions":[],"projects":[{"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"title":"Welcome","thumbnail":"/build/profile-color-circle-098ce1dbdd1469313afcdeb609cd4bf4.png","authors":[{"id":"tom","nameParsed":{"literal":"Tom Nicholas","given":"Tom","family":"Nicholas"},"name":"Tom Nicholas","orcid":"0000-0002-2176-0530","github":"TomNicholas","url":"https://tom-nicholas.com"}],"github":"https://github.com/TomNicholas/tomnicholas.github.io","references":{"ttw":{"url":"https://book.the-turing-way.org"}},"toc":[{"file":"index.md"},{"file":"about.md"},{"children":[{"children":[{"pattern":"blog/2025/**{.ipynb,.md}"}],"title":"2025"},{"children":[{"pattern":"blog/2024/**{.ipynb,.md}"}],"title":"2024"},{"children":[{"pattern":"blog/2023/**{.ipynb,.md}"}],"title":"2023"},{"children":[{"pattern":"blog/2022/**{.ipynb,.md}"}],"title":"2022"},{"children":[{"pattern":"blog/2020/**{.ipynb,.md}"}],"title":"2020"},{"children":[{"pattern":"blog/2019/**{.ipynb,.md}"}],"title":"2019"}],"file":"blog.md"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"about","title":"About me","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"blog","title":"Blog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":2,"title":"2025"},{"slug":"blog.2025.science-needs-a-social-network","title":"Science needs a social network for sharing big data","description":"","date":"2025-01-18","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open-science","frost"],"level":3},{"level":2,"title":"2024"},{"slug":"blog.2024.datatree","title":"Xarray x NASA: xarray.DataTree for hierarchical data structures","description":"","date":"2024-12-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science"],"level":3},{"level":2,"title":"2023"},{"slug":"blog.2023.cubed-xarray","title":"Cubed: Bounded-memory serverless array processing in xarray","description":"","date":"2023-06-01","thumbnail":"/build/e35ec725ea00fd2a6250d35dd849930e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","dask","cubed","open-science"],"level":3},{"slug":"blog.2023.dask-distributed","title":"Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration","description":"","date":"2023-01-04","thumbnail":"/build/f8821db67c2a5f1f07b570e6bed342cc.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","dask","open-science"],"level":3},{"level":2,"title":"2022"},{"slug":"blog.2022.easy-ipcc-datatree","title":"Easy IPCC part 1: Multi-Model Datatree","description":"","date":"2022-08-29","thumbnail":"/build/d1061528b3e546e0e4d674dab265d6e2.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science","climate-science","datatree"],"level":3},{"slug":"blog.2022.pint-xarray","title":"Unit-aware arithmetic in Xarray, via pint","description":"","date":"2022-08-30","thumbnail":"/build/undefined","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","pint","open-science","physical-units"],"level":3},{"level":2,"title":"2020"},{"slug":"blog.2020.covid19-model","title":"Coronavirus: The Simplest Model","description":"","date":"2020-03-20","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","modelling","covid-19"],"level":3},{"slug":"blog.2020.deep-pseudoscience","title":"The faulty science, doomism, and flawed conclusions of Deep Adaptation","description":"","date":"2020-07-14","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate-science","misinformation"],"level":3},{"slug":"blog.2020.oxford-divests","title":"Oxford University Divestment Explained","description":"","date":"2020-04-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate","oxford"],"level":3},{"level":2,"title":"2019"},{"slug":"blog.2019.theconversation-fusion","title":"Nuclear Fusion: too late for the climate","description":"","date":"2019-09-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["fusion","energy","climate"],"level":3}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static"},"routes/$":{"config":{"version":1,"myst":"1.3.25","options":{"favicon":"/build/profile-color-circle-ca8fbded50b8385ad3ee7f612833be43.png","logo_text":"Tom Nicholas","folders":true},"nav":[{"title":"About","url":"/about"},{"title":"Blog","url":"/blog"}],"actions":[],"projects":[{"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"title":"Welcome","thumbnail":"/build/profile-color-circle-098ce1dbdd1469313afcdeb609cd4bf4.png","authors":[{"id":"tom","nameParsed":{"literal":"Tom Nicholas","given":"Tom","family":"Nicholas"},"name":"Tom Nicholas","orcid":"0000-0002-2176-0530","github":"TomNicholas","url":"https://tom-nicholas.com"}],"github":"https://github.com/TomNicholas/tomnicholas.github.io","references":{"ttw":{"url":"https://book.the-turing-way.org"}},"toc":[{"file":"index.md"},{"file":"about.md"},{"children":[{"children":[{"pattern":"blog/2025/**{.ipynb,.md}"}],"title":"2025"},{"children":[{"pattern":"blog/2024/**{.ipynb,.md}"}],"title":"2024"},{"children":[{"pattern":"blog/2023/**{.ipynb,.md}"}],"title":"2023"},{"children":[{"pattern":"blog/2022/**{.ipynb,.md}"}],"title":"2022"},{"children":[{"pattern":"blog/2020/**{.ipynb,.md}"}],"title":"2020"},{"children":[{"pattern":"blog/2019/**{.ipynb,.md}"}],"title":"2019"}],"file":"blog.md"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"about","title":"About me","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"blog","title":"Blog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":2,"title":"2025"},{"slug":"blog.2025.science-needs-a-social-network","title":"Science needs a social network for sharing big data","description":"","date":"2025-01-18","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open-science","frost"],"level":3},{"level":2,"title":"2024"},{"slug":"blog.2024.datatree","title":"Xarray x NASA: xarray.DataTree for hierarchical data structures","description":"","date":"2024-12-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science"],"level":3},{"level":2,"title":"2023"},{"slug":"blog.2023.cubed-xarray","title":"Cubed: Bounded-memory serverless array processing in xarray","description":"","date":"2023-06-01","thumbnail":"/build/e35ec725ea00fd2a6250d35dd849930e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","dask","cubed","open-science"],"level":3},{"slug":"blog.2023.dask-distributed","title":"Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration","description":"","date":"2023-01-04","thumbnail":"/build/f8821db67c2a5f1f07b570e6bed342cc.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","dask","open-science"],"level":3},{"level":2,"title":"2022"},{"slug":"blog.2022.easy-ipcc-datatree","title":"Easy IPCC part 1: Multi-Model Datatree","description":"","date":"2022-08-29","thumbnail":"/build/d1061528b3e546e0e4d674dab265d6e2.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science","climate-science","datatree"],"level":3},{"slug":"blog.2022.pint-xarray","title":"Unit-aware arithmetic in Xarray, via pint","description":"","date":"2022-08-30","thumbnail":"/build/undefined","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","pint","open-science","physical-units"],"level":3},{"level":2,"title":"2020"},{"slug":"blog.2020.covid19-model","title":"Coronavirus: The Simplest Model","description":"","date":"2020-03-20","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","modelling","covid-19"],"level":3},{"slug":"blog.2020.deep-pseudoscience","title":"The faulty science, doomism, and flawed conclusions of Deep Adaptation","description":"","date":"2020-07-14","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate-science","misinformation"],"level":3},{"slug":"blog.2020.oxford-divests","title":"Oxford University Divestment Explained","description":"","date":"2020-04-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate","oxford"],"level":3},{"level":2,"title":"2019"},{"slug":"blog.2019.theconversation-fusion","title":"Nuclear Fusion: too late for the climate","description":"","date":"2019-09-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["fusion","energy","climate"],"level":3}]}]},"page":{"version":1,"kind":"Notebook","sha256":"67c8bd64480b7149e544355842958a3737d56b7223f5f474e3e5e767a3e28aa2","slug":"blog.2023.dask-distributed","location":"/blog/2023/dask-distributed.md","dependencies":[],"frontmatter":{"title":"Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration","tags":["code","python","dask","open-science"],"date":"2023-01-04","kernelspec":{"name":"python3","display_name":"Python 3"},"authors":[{"id":"tom","nameParsed":{"literal":"Tom Nicholas","given":"Tom","family":"Nicholas"},"name":"Tom Nicholas","orcid":"0000-0002-2176-0530","github":"TomNicholas","url":"https://tom-nicholas.com"}],"github":"https://github.com/TomNicholas/tomnicholas.github.io","abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"numbering":{"title":{"offset":2}},"edit_url":"https://github.com/TomNicholas/tomnicholas.github.io/blob/main/blog/2023/dask-distributed.md","thumbnail":"/build/f8821db67c2a5f1f07b570e6bed342cc.png","exports":[{"format":"md","filename":"dask-distributed.md","url":"/build/dask-distributed-55bb4201be9e66ca621bd6f4c4c6faef.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"By Tom Nicholas and Ryan Abernathey","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"K97P27C6W5"}],"key":"LUsx67NJWQ"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"(Originally posted on the ","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"Aev8SWcVga"},{"type":"link","url":"https://medium.com/pangeo/dask-distributed-and-pangeo-better-performance-for-everyone-thanks-to-science-software-63f85310a36b","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Pangeo Medium blog","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"zAjHtiF0AM"}],"urlSource":"https://medium.com/pangeo/dask-distributed-and-pangeo-better-performance-for-everyone-thanks-to-science-software-63f85310a36b","key":"SVYzKr7ruR"},{"type":"text","value":".)","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"aPI47mEWMY"}],"key":"bm71cxqYiJ"},{"type":"heading","depth":2,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Summary","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"OMGxbXyRNK"}],"identifier":"summary","label":"Summary","html_id":"summary","implicit":true,"key":"eJpCku694z"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":20,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Pangeo aimed to make big data analysis easy for scientists","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"qqzbNMyuvi"}],"key":"vXRNAQuPLg"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"But awkwardly dask.distributed would fail at large scales…","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"xoWJKGGtgT"}],"key":"bxJ9WAd3a7"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"It’s now fixed, hooray for scientist-developer collaboration!","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"BoZLSPKr3o"}],"key":"ARgggti0ap"}],"key":"uJTSmLOxgB"},{"type":"heading","depth":2,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"The Grand Vision","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"XUz3xEOSBi"}],"identifier":"the-grand-vision","label":"The Grand Vision","html_id":"the-grand-vision","implicit":true,"key":"qlz8CbWnZc"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"UVUEtb9VvS"},{"type":"link","url":"https://medium.com/pangeo/announcing-the-climate-data-science-lab-funded-by-the-moore-foundation-4bc4314ac02d","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Climate Data Science Lab","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"QnUHuTwxmm"}],"urlSource":"https://medium.com/pangeo/announcing-the-climate-data-science-lab-funded-by-the-moore-foundation-4bc4314ac02d","key":"JWljNA5G1G"},{"type":"text","value":" (funded by the Gordon and Betty Moore Foundation) was founded to create a positive feedback loop between practicing climate scientists and developers of open-source scientific software.\nMotivated by the explosion in the size of scientific datasets needing analysis, the idea was to improve the software tools available in the ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"GwDMmhSQcg"},{"type":"link","url":"https://pangeo.io/packages.html","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Pangeo stack","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"mGbB7vInvY"}],"urlSource":"https://pangeo.io/packages.html","key":"cs74HWoT0w"},{"type":"text","value":" by creating a group with people who could both use the software to do scientific research and write the necessary code.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"D3x7vfMUn3"}],"key":"BwP8wjemVM"},{"type":"paragraph","position":{"start":{"line":29,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"For some software packages, this approach of having scientist-developer contributors has worked pretty well.\nIn particular Xarray and Zarr have both benefited hugely from having a tight loop between users and developers, or even a core development team containing users who are practicing scientists.","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"XYZcTXAPya"}],"key":"KpJ0klk4lT"},{"type":"heading","depth":2,"position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Dask as a linchpin","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"TZiQVjpTPx"}],"identifier":"dask-as-a-linchpin","label":"Dask as a linchpin","html_id":"dask-as-a-linchpin","implicit":true,"key":"ishtJWqJsc"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Central to the ","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"VQE93YDTAO"},{"type":"link","url":"https://pangeo.io/about.html","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Pangeo vision","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"QI72WxSrcW"}],"urlSource":"https://pangeo.io/about.html","key":"tp1bHwMEgR"},{"type":"text","value":" was the ability for users to easily scale up analysis from data small enough to fit on a single machine to workloads requiring distributed systems, analyzing many terabytes or even petabytes of data.\nAs something of a scientist myself, this would be transformative — all we really want out of computers is to write down our analysis method clearly, and then simply apply it to all of our available data.","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"lUv01JdHNX"}],"key":"bgcaGrIFk8"},{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"Enter Dask, a parallel computing library which plugs seamlessly into Xarray and has a distributed scheduler capable of of computation across many nodes.\nDask was mission critical — as the Pangeo website says:","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"vJd1q2RKEF"}],"key":"JxMXbNrwjB"},{"type":"blockquote","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"“Dask is the key to the scalability of the Pangeo platform”.","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"slzhViktyT"}],"key":"cmF6xuQCXI"}],"key":"FlD2JijivU"},{"type":"image","url":"/build/f8821db67c2a5f1f07b570e6bed342cc.png","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"ZrOHdx3dql","urlSource":"https://i.imgur.com/fUOaKiX.png"},{"type":"heading","depth":3,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"Perennial performance problems","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"iwiJPEEpks"}],"identifier":"perennial-performance-problems","label":"Perennial performance problems","html_id":"perennial-performance-problems","implicit":true,"key":"DmQ1BZRskR"},{"type":"paragraph","position":{"start":{"line":47,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"Unfortunately, as the Pangeo community of computational scientists has pushed this tool stack to larger and larger scales, we have sometimes found that dask often did not perform the way we hoped.\nIn theory, we could prototype an analysis on small data, then hand it off to dask, whose distributed execution engine would apply it smoothly in parallel to much larger datasets.\nIf the analysis algorithm is straightforward to parallelize (e.g. applying the same function to every independent time slice of a dataset) then it should simply work, applying the same algorithm chunk-by-chunk in a streaming-like fashion.\nTo do bigger science you would just have to fork out more cloud computing credits.","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"tFzUzuEOeQ"}],"key":"Z4mxVDQ4Oy"},{"type":"paragraph","position":{"start":{"line":52,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"In reality, what sometimes happens is that analysis workflows begin to stall at large scales.\nIn particular, the live dask task dashboard would show the dreaded orange bars, indicating that the memory of dask workers was becoming saturated, and they were being forced to spill data to disk.\nThe spilling would then massively slow down task execution on those workers, which often caused your computation to slow to an endless crawl, and in the worst case kill your workers.","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"D6NX3Wpdgj"}],"key":"EX0IOl0uGe"},{"type":"image","url":"/build/30b8675245d6cc3089fe6bb77fdd2e9c.png","alt":"dask dashboard screenshot","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"VJdyuDIHXQ","urlSource":"https://i.imgur.com/MLYEohr.png"},{"type":"paragraph","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"This scalability issue became a ","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"u7jgYtsvPP"},{"type":"link","url":"https://discourse.pangeo.io/t/best-practices-to-go-from-1000s-of-netcdf-files-to-analyses-on-a-hpc-cluster/588/3","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"well-known problem","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"NQQSzmSDjP"}],"urlSource":"https://discourse.pangeo.io/t/best-practices-to-go-from-1000s-of-netcdf-files-to-analyses-on-a-hpc-cluster/588/3","key":"NzmqNrSWC8"},{"type":"text","value":" in the pangeo community, to the point where we had common recommendations for coping strategies, employing such advanced solutions as ","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"pRHnxaUJGt"},{"type":"link","url":"https://discourse.pangeo.io/t/dask-not-completing-large-operations-on-sose-data/2788/4","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"“just get more RAM”","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"bT3FwrddpT"}],"urlSource":"https://discourse.pangeo.io/t/dask-not-completing-large-operations-on-sose-data/2788/4","key":"k5YYKzUxkp"},{"type":"text","value":", or ","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"kqSsW5n2p2"},{"type":"link","url":"https://github.com/dask/distributed/issues/6360#issuecomment-1129484190","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"“break the job up before feeding to the scheduler”","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"lVXt8aXhNW"}],"urlSource":"https://github.com/dask/distributed/issues/6360#issuecomment-1129484190","data":{"kind":"issue","org":"dask","repo":"distributed","issue_number":"6360"},"internal":false,"protocol":"github","key":"DeZDfgzLoi"},{"type":"text","value":".","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"x6HY9ScmSf"}],"key":"zJI1USxclz"},{"type":"paragraph","position":{"start":{"line":60,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"The issue was of course ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"qZbRg0TCb7"},{"type":"link","url":"https://github.com/dask/distributed/issues/2602","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"reported upstream","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"XHAIbV0w2G"}],"urlSource":"https://github.com/dask/distributed/issues/2602","data":{"kind":"issue","org":"dask","repo":"distributed","issue_number":"2602"},"internal":false,"protocol":"github","key":"LftJt69J09"},{"type":"text","value":", but the discussion languished over multiple years, for two big reasons.\nFirstly, the problem with the distributed scheduler’s performance was very hard to diagnose, especially for the scientists encountering it, none of whom were dask core developers.\nFrustratingly, there seemed to be a gap between the theoretical performance of the scheduler on artificial test cases and the real-world performance on actual scientific workloads.\nInvoking the mantra of ","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"CA9kcVm8ik"},{"type":"emphasis","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"“Can you please simplify this to a minimum failing example?”","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"hoDHLPiYZO"}],"key":"C7DqJUn8uB"},{"type":"text","value":" didn’t help, as it was very hard for non-expert dask users to “dumb down” their full analysis problems.","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"mXu3TyPWwd"}],"key":"yq0UNVZTeU"},{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"text","value":"Secondly, ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"B73bPu1FMr"},{"type":"link","url":"https://github.com/dask/distributed/pull/4967","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"early attempts to fix the problem","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"Rbj3M18EMa"}],"urlSource":"https://github.com/dask/distributed/pull/4967","data":{"kind":"issue","org":"dask","repo":"distributed","issue_number":"4967"},"internal":false,"protocol":"github","key":"AbPPQvqjuK"},{"type":"text","value":" did not get at the root cause.\nThere were multiple scheduling inefficiencies known to the Dask devs which might be relevant, but after these were fixed the performance ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"l0NFkzNv5O"},{"type":"link","url":"https://github.com/dask/distributed/issues/2602#issuecomment-891156357","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"only improved marginally","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"Kptx8mdUZ3"}],"urlSource":"https://github.com/dask/distributed/issues/2602#issuecomment-891156357","data":{"kind":"issue","org":"dask","repo":"distributed","issue_number":"2602"},"internal":false,"protocol":"github","key":"UpSNbs0grQ"},{"type":"text","value":" in many of the Pangeo use cases.","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"VbF4y9I3hZ"}],"key":"ijtGrKQXPB"},{"type":"heading","depth":3,"position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"children":[{"type":"text","value":"Attempting to analyse ocean data with xGCM and dask","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"PW1yOVhVlV"}],"identifier":"attempting-to-analyse-ocean-data-with-xgcm-and-dask","label":"Attempting to analyse ocean data with xGCM and dask","html_id":"attempting-to-analyse-ocean-data-with-xgcm-and-dask","implicit":true,"key":"hT1mz6knBL"},{"type":"paragraph","position":{"start":{"line":70,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"text","value":"I was one of the scientists frustrated by being unable to understand why Dask would work so beautifully on subsets of my dataset, but failed when I ran the same analysis at full scale.\nMy analysis problem was to use the ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"lT8tZJ4VLe"},{"type":"link","url":"https://github.com/xgcm/xgcm","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"xGCM package","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"YLCB7lpIbi"}],"urlSource":"https://github.com/xgcm/xgcm","error":true,"key":"aBsX7Nusk2"},{"type":"text","value":" to apply vector calculus operations in a ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"aprqQbmsw7"},{"type":"link","url":"https://xgcm.readthedocs.io/en/latest/grids.html","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"grid-aware manner","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"WNh4lmvyJA"}],"urlSource":"https://xgcm.readthedocs.io/en/latest/grids.html","key":"dVAma65ZQz"},{"type":"text","value":" to a very large oceanographic simulation ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"j3sQllzwoJ"},{"type":"link","url":"https://catalog.pangeo.io/browse/master/ocean/LLC4320/","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"dataset","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"dDTCaco13Q"}],"urlSource":"https://catalog.pangeo.io/browse/master/ocean/LLC4320/","key":"xyB275LIQh"},{"type":"text","value":" called ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"aNINbSRgGe"},{"type":"link","url":"https://online.kitp.ucsb.edu/online/blayers18/menemenlis/pdf/Menemenlis_BLayers18_KITP.pdf","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"LLC4320","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"KKbFrqZhAi"}],"urlSource":"https://online.kitp.ucsb.edu/online/blayers18/menemenlis/pdf/Menemenlis_BLayers18_KITP.pdf","key":"sFpOfUrD9l"},{"type":"text","value":".\nThe inability to analyse this particular Petabyte-scale dataset was actually one of the original ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"Sm9A2del5g"},{"type":"link","url":"https://medium.com/pangeo/petabytes-of-ocean-data-part-1-nasa-ecco-data-portal-81e3c5e077be","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"motivations that led to Pangeo","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"BwBCTgE38F"}],"urlSource":"https://medium.com/pangeo/petabytes-of-ocean-data-part-1-nasa-ecco-data-portal-81e3c5e077be","key":"WUzmkcInlr"},{"type":"text","value":", and my project was supposed to show that with the power of this full-stack solution we could now do oceanographic science at a scale not previously possible.","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"d5FV9QC1Q6"}],"key":"cMBsrE6InY"},{"type":"paragraph","position":{"start":{"line":74,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"text","value":"Dask encodes computations into a directed acyclic graph (DAG) of tasks to be executed by the scheduler, and in this respect our computation was not particularly unusual.\nWe needed to open a large number of independent chunks of data (the ocean state at different times), apply a function to each (e.g. take the divergence of the surface velocity of the ocean), then save each of these chunks back out.\nHowever it had some subtleties that would prove important.\nIn particular xGCM’s new ","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"MLLpcFX2Ex"},{"type":"link","url":"https://xgcm.readthedocs.io/en/latest/grid_ufuncs.html","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"text","value":"“grid ufuncs”","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"NLXOuOm6Xq"}],"urlSource":"https://xgcm.readthedocs.io/en/latest/grid_ufuncs.html","key":"Y2Oi6nCdTS"},{"type":"text","value":" feature has an option to apply boundary conditions by padding one side of an array before applying the vector calculus operation.\nWhat this meant for dask is that the task graph was slightly more complex than a typical test case (e.g. compared to using ","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"l1cbtm1OZu"},{"type":"link","url":"https://docs.xarray.dev/en/stable/generated/xarray.apply_ufunc.html","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"text","value":"xarray’s ","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"Bk0BAAIwE9"},{"type":"inlineCode","value":"apply_ufunc","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"DwUbPN3FHk"}],"urlSource":"https://docs.xarray.dev/en/stable/generated/xarray.apply_ufunc.html","key":"in9CDLDnD4"},{"type":"text","value":"), with small side chains that would get merged back in during the course of the computation.","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"E3HU0NEvNG"}],"key":"BJUIE77oHZ"},{"type":"image","url":"/build/2d1423931fc0708d1f7e04d98b663495.png","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"Rj71wRIfR2","urlSource":"https://i.imgur.com/cbkVd7F.png"},{"type":"paragraph","position":{"start":{"line":82,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"text","value":"Suspecting that these side chains were confusing the scheduler somehow, we tried various suggestions to eliminate these peripheral tasks, trying to simplify the topology of the overall graph, such as ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"UwEMTrlgTH"},{"type":"link","url":"https://speakerdeck.com/tomnicholas/scipy-2022-can-we-analyse-the-largest-ocean-simulation-ever?slide=25","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"text","value":"task fusion","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"wi0Fn6O8TY"}],"urlSource":"https://speakerdeck.com/tomnicholas/scipy-2022-can-we-analyse-the-largest-ocean-simulation-ever?slide=25","key":"VSLuu3LcLX"},{"type":"text","value":", ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"tYsPuPxvg8"},{"type":"link","url":"https://github.com/pydata/xarray/pull/6566","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"text","value":"inlining","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"e7PAvgF9Nu"}],"urlSource":"https://github.com/pydata/xarray/pull/6566","data":{"kind":"issue","org":"pydata","repo":"xarray","issue_number":"6566"},"internal":false,"protocol":"github","key":"AQxc2pjsGA"},{"type":"text","value":", and ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"ofPL8WbvcH"},{"type":"link","url":"https://distributed.dask.org/en/stable/locality.html#data-scatter","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"text","value":"scattering","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"IEh8H2qI6p"}],"urlSource":"https://distributed.dask.org/en/stable/locality.html#data-scatter","key":"xvYrbbJA7r"},{"type":"text","value":".\nAlas none of these fixes banished the orange bars.","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"JEMFVpF0mH"}],"key":"OdZGk7fOwO"},{"type":"paragraph","position":{"start":{"line":85,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"A common feature of all the failing workloads appeared to be the loading in of more data than expected.\nEven for almost “embarrasingly-parallel” computation graphs, we could see that many ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"pGsj4I6A0O"},{"type":"link","url":"https://github.com/dask/distributed/issues/2602#issue-431288347","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"children":[{"type":"text","value":"more data-opening tasks were being performed than data-analysing tasks","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"ZSw8XrKgfs"}],"urlSource":"https://github.com/dask/distributed/issues/2602#issue-431288347","data":{"kind":"issue","org":"dask","repo":"distributed","issue_number":"2602"},"internal":false,"protocol":"github","key":"ldvQ0CvTaJ"},{"type":"text","value":", meaning that dask was over-eagerly loading in more data than it needed, overwhelming the workers.","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"ApT2yluLuL"}],"key":"SjNW34V3gK"},{"type":"heading","depth":3,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"text","value":"A fix is found!","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"rizKN0QKXD"}],"identifier":"a-fix-is-found","label":"A fix is found!","html_id":"a-fix-is-found","implicit":true,"key":"JoXVzK4oqB"},{"type":"paragraph","position":{"start":{"line":91,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"text","value":"I ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"ZoRBejCfps"},{"type":"link","url":"https://github.com/dask/distributed/issues/6360","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"reported this issue upstream","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"df01qqo8C4"}],"urlSource":"https://github.com/dask/distributed/issues/6360","data":{"kind":"issue","org":"dask","repo":"distributed","issue_number":"6360"},"internal":false,"protocol":"github","key":"HnTn8lrQDr"},{"type":"text","value":", resurrecting a ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"CBeBfoPn7z"},{"type":"link","url":"https://github.com/dask/distributed/issues/2602","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"previous discussion","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"hYeCIsxKnS"}],"urlSource":"https://github.com/dask/distributed/issues/2602","data":{"kind":"issue","org":"dask","repo":"distributed","issue_number":"2602"},"internal":false,"protocol":"github","key":"XkuBzH6kHE"},{"type":"text","value":", along with a half-baked suggestion of how we might fix it in the scheduler.\nI included some of our task graphs, and ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"TBPHmd6MQd"},{"type":"link","url":"https://github.com/gjoseph92","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"Gabe Joseph","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"BNbutA6PaG"}],"urlSource":"https://github.com/gjoseph92","error":true,"key":"m6TwAsZeqE"},{"type":"text","value":" of Coiled suggested a quick way to try out my naive suggestion.","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"B8o41PBGQu"}],"key":"livkDfcHVj"},{"type":"paragraph","position":{"start":{"line":94,"column":1},"end":{"line":97,"column":1}},"children":[{"type":"text","value":"A breakthrough came when, after iterating back and forth, we decided to take our efforts to the ","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"xsvYf6LZvY"},{"type":"link","url":"https://docs.coiled.io/user_guide/support.html","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"Coiled Slack","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"m2ky0Acc0L"}],"urlSource":"https://docs.coiled.io/user_guide/support.html","key":"WogR17vxd3"},{"type":"text","value":", where Gabe could have me run test versions of ","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"D8Cg9gHGW5"},{"type":"inlineCode","value":"dask.distributed","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"emVFjg8kgb"},{"type":"text","value":" on their ","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"EUmqIVEFv6"},{"type":"link","url":"https://www.coiled.io/product-overview","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"cloud platform","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"VsOnXX903v"}],"urlSource":"https://www.coiled.io/product-overview","key":"sfnlVAaX5v"},{"type":"text","value":".\nWe realised that the xGCM analysis could reproduce the over-eager memory consumption problem even in small cases - now we had a minimum failing example!\nIt appeared that the side chains were enough of an added complexity to the task graph to make expose a race condition in the scheduling process, which allowed more data-loading tasks to run than necessary.\nThis explained how artifical test examples could perform smoothly whilst users still reported failures in real-world cases!","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"eRwAvf2A4i"}],"key":"YHhAvCN42d"},{"type":"paragraph","position":{"start":{"line":99,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"Now armed with the understanding to reproduce the problem, as well as motivating cases for fixing it, Gabe went off to ","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"UIZ8ZK6Wwl"},{"type":"link","url":"https://github.com/dask/distributed/pull/6614","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"solve it comprehensively","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"hfUb1nHI09"}],"urlSource":"https://github.com/dask/distributed/pull/6614","data":{"kind":"issue","org":"dask","repo":"distributed","issue_number":"6614"},"internal":false,"protocol":"github","key":"WF44ur7PmA"},{"type":"text","value":".\nI can’t thank him and the other dask developers enough for the effort they put in here.\nThey made a ","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"hPecRE8N0Z"},{"type":"link","url":"https://github.com/coiled/coiled-runtime/pull/243","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"set of test problems","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"ol7WzjxViZ"}],"urlSource":"https://github.com/coiled/coiled-runtime/pull/243","data":{"kind":"issue","org":"coiled","repo":"coiled-runtime","issue_number":"243"},"internal":false,"protocol":"github","key":"MfH2CW8NJr"},{"type":"text","value":", including ","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"Bj3eDqvrMe"},{"type":"link","url":"https://github.com/coiled/coiled-runtime/issues/174","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"one based on my xGCM case","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"G0sspcmNso"}],"urlSource":"https://github.com/coiled/coiled-runtime/issues/174","data":{"kind":"issue","org":"coiled","repo":"coiled-runtime","issue_number":"174"},"internal":false,"protocol":"github","key":"a1MXt3mvWK"},{"type":"text","value":", and created an opt-in flag so that the ","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"pKXUkFrf96"},{"type":"link","url":"https://github.com/dask/distributed/discussions/7128","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"Pangeo users could try out their solution","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"q21AWfz2TD"}],"urlSource":"https://github.com/dask/distributed/discussions/7128","error":true,"key":"cLIwnCLwpY"},{"type":"text","value":" in the wild.\n(You can read an in-depth explanation of exactly what the problem with “root task overproduction” was and how it was solved in ","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"jzbcOaP1AG"},{"type":"link","url":"https://www.coiled.io/blog/reducing-dask-memory-usage","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"Gabe’s post on the Coiled blog","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"KWSPhsTbJr"}],"urlSource":"https://www.coiled.io/blog/reducing-dask-memory-usage","key":"pfwyiWgZOi"},{"type":"text","value":".)","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"qq5l7T2kfL"}],"key":"X8TZOolfI8"},{"type":"paragraph","position":{"start":{"line":104,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"text","value":"Various community members were now able to test it, including pangeo software-developing scientists with a interest in pushing dask performance as far as we can, such as ","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"Is9UJG5dHf"},{"type":"link","url":"https://github.com/dask/distributed/discussions/7128#discussioncomment-3910328","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"myself","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"LGOU15jHNx"}],"urlSource":"https://github.com/dask/distributed/discussions/7128#discussioncomment-3910328","error":true,"key":"oWvgVZudk2"},{"type":"text","value":", ","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"VCYrR39sot"},{"type":"link","url":"https://github.com/dask/distributed/discussions/7128#discussioncomment-3863838","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"Deepak Cherian","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"b7uVPQhlGy"}],"urlSource":"https://github.com/dask/distributed/discussions/7128#discussioncomment-3863838","error":true,"key":"Urx699sO0G"},{"type":"text","value":", and ","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"UIESbL1GGm"},{"type":"link","url":"https://github.com/dask/distributed/discussions/7128#discussioncomment-3964014","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"Julius Busecke","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"XDb9ROMzh4"}],"urlSource":"https://github.com/dask/distributed/discussions/7128#discussioncomment-3964014","error":true,"key":"b5PDm1IHYl"},{"type":"text","value":".\nWe found that this improved task allocation algorithm worked so much better on essentially all of our varied types of geospatial workloads, and the opt-in flag has now become the default in dask distributed version 2022.11.0!","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"ve7gC7TgvR"}],"key":"uLdv8n5esb"},{"type":"heading","depth":3,"position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"text","value":"Impact","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"WX7nSNuHjh"}],"identifier":"impact","label":"Impact","html_id":"impact","implicit":true,"key":"DNwN9R0niO"},{"type":"paragraph","position":{"start":{"line":110,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"text","value":"The difference in performance is massive for affected workloads - not only did it banish the dreaded orange bars by lowering the peak memory usage, but computations often finished faster too!\nThe benefits apply across a wide range of workloads, not just those that motivated solving the problem in the first place.","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"hWCA5kfhMY"}],"key":"Dgvwxtxl45"},{"type":"paragraph","position":{"start":{"line":113,"column":1},"end":{"line":115,"column":1}},"children":[{"type":"text","value":"I think it’s fair to say that this fix represents a “leap in productivity across the entire field” [of pangeo-using scientists], by speeding up or enabling computations that were either a pain to run before or flat-out impossible.\nThis fulfils one of the ","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"XATILZ9aNh"},{"type":"link","url":"https://medium.com/pangeo/announcing-the-climate-data-science-lab-funded-by-the-moore-foundation-4bc4314ac02d","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"children":[{"type":"text","value":"original stated aims of the Climate Data Science lab","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"XQnd9iJy5a"}],"urlSource":"https://medium.com/pangeo/announcing-the-climate-data-science-lab-funded-by-the-moore-foundation-4bc4314ac02d","key":"W356LDCcT5"},{"type":"text","value":", substantiating the idea that collaborations between practicising scientists / research software engineers (Pangeo) and industry software developers (Coiled) can lead to big benefits for both.\nIn fact the benefits spill over into other fields of science too, as the Xarray + Dask combo is domain-agnostic.","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"p1VHO1C6X6"}],"key":"oT3m6ZxmYZ"},{"type":"heading","depth":3,"position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Lessons","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"TcTT72yQSI"}],"identifier":"lessons","label":"Lessons","html_id":"lessons","implicit":true,"key":"wCuOyXhVvM"},{"type":"paragraph","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"children":[{"type":"text","value":"What can we learn from this?","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"aei7Ic4Ktz"}],"key":"VbRWZTKJiH"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":122,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":122,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"strong","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"Users found real problems","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"lH8Prx95eb"}],"key":"PFpow6kj7n"}],"key":"DMmKdaaQvy"}],"key":"Ntx37dk8tz"},{"type":"paragraph","position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"Firstly, it emphasises the importance of listening to users.\n","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"t8bga2JnjW"},{"type":"link","url":"https://www.coiled.io/blog/prioritizing-pragmatic-performance-for-dask","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"children":[{"type":"text","value":"Matt Rocklin mentioned this recently","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"FCzXeJpBWI"}],"urlSource":"https://www.coiled.io/blog/prioritizing-pragmatic-performance-for-dask","key":"rAWh9bWEHO"},{"type":"text","value":", explaining why the dask team try to prioritise solving problems that are consistently reported by users, rather than jumping on easy-to-identify shiny new ways to speed up parts of the code that might not actually be a bottleneck.","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"ByA3cnUWP6"}],"key":"mBGOoSw2xr"},{"type":"list","ordered":true,"start":2,"spread":false,"position":{"start":{"line":127,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":127,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"strong","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"text","value":"Scientist-dev “road-testers” identified the core issue","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"vq21I4R8B1"}],"key":"CqXlNOXo5t"}],"key":"L1wzVSQXEX"}],"key":"JJZjzIzIyL"},{"type":"paragraph","position":{"start":{"line":129,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"text","value":"Secondly, scientist-developers like myself were able to identify problems that affected average scientist-users, but average users could not have fixed (or even identified).\nClearly it’s worthwhile to fund a few “Research Software Engineers” whose focus is improving software for scientists rather than only publishing scientific papers.\n(Another example of this in the Pangeo sphere is Deepak Cherian’s work on ","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"dhDiyLPnVH"},{"type":"link","url":"https://twitter.com/cherian_deepak/status/1461031799988133899","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"text","value":"improving groupby operations in dask","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"LYJuj6wbwV"}],"urlSource":"https://twitter.com/cherian_deepak/status/1461031799988133899","key":"NLadHc3JH5"},{"type":"text","value":".)\nThe key point here is that if the devs are also users, they are motivated to focus on hunting down the problems that all users face.","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"g9rrZefKn5"}],"key":"ybCI3QF87H"},{"type":"list","ordered":true,"start":3,"spread":false,"position":{"start":{"line":134,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":134,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"strong","position":{"start":{"line":134,"column":1},"end":{"line":134,"column":1}},"children":[{"type":"text","value":"Minimum reproducible example extremely important, but also hard in a full-stack context","position":{"start":{"line":134,"column":1},"end":{"line":134,"column":1}},"key":"cNU9TklBPU"}],"key":"MJIYXcwcjB"}],"key":"sMtz3mpJzk"}],"key":"wurFQQqBsa"},{"type":"paragraph","position":{"start":{"line":136,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"Without a ","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"WmUyCyyjin"},{"type":"link","url":"https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"children":[{"type":"text","value":"minimal, complete, reproducible example","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"gxosIFo9bt"}],"urlSource":"https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports","key":"LnDdeBcnBm"},{"type":"text","value":" this problem did not get solved.\nHowever, it took a long time for such an example to emerge for a piece of software as complex as dask.\nThe problem was too subtle to be captured by a simple toy example, but real example workflows were generally too complex to clearly point to where the problem was coming from.","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"aHsL5pIFz8"}],"key":"DtNRtDfc9T"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"I’m not entirely sure what the solution is here, but perhaps galleries of examples of intermediate complexity could be more easily adapted into failing problems than starting from either toy problems or real-world cases.","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"jMsWvCX9JO"}],"key":"Xmz0Stmlni"},{"type":"paragraph","position":{"start":{"line":142,"column":1},"end":{"line":144,"column":1}},"children":[{"type":"text","value":"It’s also arguably more important that a failing example is reproducible than it is minimal, but that’s still challenging in a real scientific context.\nWe should be aiming to make all work on Pangeo cloud esily reproducible anyway, whether it’s polished final results or fail cases.\nThis means making it simpler to access data regardless of format (especially requester-pays buckets), on a common cloud compute platform, and full control over software environments to install experimental versions of packages.","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"kavTmnpyDv"}],"key":"xHlxhYhBlc"},{"type":"list","ordered":true,"start":4,"spread":false,"position":{"start":{"line":146,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":146,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"strong","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"text","value":"Automated performance testing and full-stack tests crucial","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"pOOs37VSjr"}],"key":"PF3ywcK3de"}],"key":"AxsLrGfcIS"}],"key":"FRJWBdOGhx"},{"type":"paragraph","position":{"start":{"line":148,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"text","value":"Another aspect of the problem was users seeing poor performance but not having a rigorous way to report it. Every example was somewhat anecdotal, home-brewed, awkward to recreate, and not necessarily convincingly benchmarked.\nA set of automated full-stack performance tests (i.e. “integration testing”) might have flagged this problem and narrowed it down much earlier.\nThis idea has been ","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"uU3vJzo9K0"},{"type":"link","url":"https://github.com/pangeo-data/pangeo-integration-tests","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"children":[{"type":"text","value":"proposed for the pangeo stack before","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"eyRWcW0bib"}],"urlSource":"https://github.com/pangeo-data/pangeo-integration-tests","error":true,"key":"tc8PAqXLuk"},{"type":"text","value":", but not yet fully implemented.\nWe could also work with Coiled to get more Pangeo use cases into their automated performance tests.","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"Yv9tS2gAgi"}],"key":"Bo4e1rpMjo"},{"type":"list","ordered":true,"start":5,"spread":false,"position":{"start":{"line":153,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":153,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"strong","position":{"start":{"line":153,"column":1},"end":{"line":153,"column":1}},"children":[{"type":"text","value":"Academia-industry collaboration around open source can be a very productive pattern","position":{"start":{"line":153,"column":1},"end":{"line":153,"column":1}},"key":"PecTa2FQHe"}],"key":"rxWcSmx0SV"}],"key":"cWaQ7MQEEw"}],"key":"yvIKYUy8xY"},{"type":"paragraph","position":{"start":{"line":155,"column":1},"end":{"line":159,"column":1}},"children":[{"type":"text","value":"The Pangeo community has always strived to integrate people from academia, government agencies, and private industry.\nIn particular, we have always written into our grants consulting and services from open-source companies like ","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"Ys5L3HELli"},{"type":"link","url":"https://anaconda.org/","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"Anaconda","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"FDn3qyccMv"}],"urlSource":"https://anaconda.org/","key":"l7mKO9D6Kp"},{"type":"text","value":", ","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"XugABRSro1"},{"type":"link","url":"https://www.bopen.eu/","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"B-Open","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"TIjUE5xvLj"}],"urlSource":"https://www.bopen.eu/","key":"cMpKh9MWbl"},{"type":"text","value":", ","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"QlhCXowOCh"},{"type":"link","url":"https://quansight.com/","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"Quansight","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"cERNyYU7Dl"}],"urlSource":"https://quansight.com/","key":"yx1oKWkKiJ"},{"type":"text","value":", and ","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"k3UxaQTuf1"},{"type":"link","url":"https://www.coiled.io/","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"Coiled","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"pmI8C4ROqy"}],"urlSource":"https://www.coiled.io/","key":"zKeSPlbby5"},{"type":"text","value":" (just to name a few).\nThese arrangements have given our scientist-developers access to specialized software engineering expertise that is hard to hire for internally.\nConversely, the analysis problems that scientists face tend to really push the boundaries of what is possible, providing interesting and useful challenges to motivate software development.\nThis relationship worked well in this case, and we think it can be replicated more broadly.","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"UFwt5SD6ES"}],"key":"MSo6b6atIL"},{"type":"heading","depth":3,"position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"text","value":"Next steps for this stack?","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"x3RvKGN8bs"}],"identifier":"next-steps-for-this-stack","label":"Next steps for this stack?","html_id":"next-steps-for-this-stack","implicit":true,"key":"lUiVwHYHZR"},{"type":"paragraph","position":{"start":{"line":164,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"text","value":"When working with big tabular data in the cloud, an analyst has a wide range of software choices, from data warehouses like Snowflake and BigQuery to open-source query engines like Spark, Presto, Trino, Dask Dataframe, DuckDB, etc.\nThe prevalance of SQL in this world means that users can pretty easily take the same code (SQL queries) and run it on different back-ends.\nThis friendly competition has driven a lot of innovation and performance improvements.","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"kTsAd6Lhm3"}],"key":"r8v3uCFXiN"},{"type":"paragraph","position":{"start":{"line":168,"column":1},"end":{"line":168,"column":1}},"children":[{"type":"text","value":"For big arrays, for a long time Dask’s Array module has been the only game in town. While we love Dask, we think it’s also great to see alternative array-oriented “query engines” coming online--it’s a sign that scientific computing in the cloud is maturing. In particular, we’re excited about:","position":{"start":{"line":168,"column":1},"end":{"line":168,"column":1}},"key":"mvV5nvfP5C"}],"key":"hxfJoRJ8WE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":169,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"children":[{"type":"link","url":"https://github.com/google/xarray-beam","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"children":[{"type":"text","value":"Xarray Beam","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"iMDDD1kKGl"}],"urlSource":"https://github.com/google/xarray-beam","error":true,"key":"AY0jqv7ApJ"},{"type":"text","value":", a framework based around ","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"Cgb2GA81yl"},{"type":"link","url":"https://beam.apache.org/","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"children":[{"type":"text","value":"Apache Beam","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"vVf8a3ygLu"}],"urlSource":"https://beam.apache.org/","key":"GCKQHmGtM7"},{"type":"text","value":",","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"VqsADClyxn"}],"key":"GGQY1P4EEw"},{"type":"listItem","spread":true,"position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"link","url":"https://github.com/tomwhite/cubed/","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"text","value":"Cubed","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"fAt9ZD7peE"}],"urlSource":"https://github.com/tomwhite/cubed/","error":true,"key":"nOWptGyEqa"},{"type":"text","value":", a serverless framework inspired by ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"nJj8bdj57x"},{"type":"link","url":"https://github.com/pangeo-data/rechunker/","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"text","value":"Rechunker","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"b4q7aQr5lX"}],"urlSource":"https://github.com/pangeo-data/rechunker/","error":true,"key":"n9RekvxGxE"},{"type":"text","value":",","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"U2kmvoUot3"}],"key":"q2LZzAGgHy"},{"type":"listItem","spread":true,"position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"link","url":"https://github.com/Python-for-HPC/ramba","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"text","value":"Ramba","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"s1eLpTfEmU"}],"urlSource":"https://github.com/Python-for-HPC/ramba","error":true,"key":"hwxbIDpUR5"},{"type":"text","value":", which parallelizes numba-compiled functions using ","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"xRqx04u2RE"},{"type":"link","url":"https://www.ray.io/ray-core","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"text","value":"Ray","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"LUkmwULrEr"}],"urlSource":"https://www.ray.io/ray-core","key":"wft6udzOFx"},{"type":"text","value":",","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"OnkQGgipmP"}],"key":"m9ANenIuMF"},{"type":"listItem","spread":true,"position":{"start":{"line":172,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"link","url":"https://github.com/Bears-R-Us/arkouda","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"children":[{"type":"text","value":"Arkouda","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"key":"d99S2oIhLD"}],"urlSource":"https://github.com/Bears-R-Us/arkouda","error":true,"key":"Mo2RCVDj9x"},{"type":"text","value":", which wraps a parallel implementation in the domain-specific language ","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"key":"aaK4uKY22y"},{"type":"link","url":"https://chapel-lang.org/","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"children":[{"type":"text","value":"Chapel","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"key":"vfUctkdf7g"}],"urlSource":"https://chapel-lang.org/","key":"chpXaqyXrR"},{"type":"text","value":".","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"key":"nUlzAFCAW7"}],"key":"kP9gwyCMEz"}],"key":"lkkth8PYTg"},{"type":"paragraph","position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"text","value":"Hopfeully some of these new projects can explore new algorithms and architectures that can drive further improvements in Dask, resulting in faster time-to-science and more efficient use of computing resources.","position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"key":"ZBjy0djLu4"}],"key":"bYDby6qqOz"},{"type":"paragraph","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"text","value":"If you’re interested in exploring the nascent area of distributed array computing in the cloud, we invite you to join the ","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"WeFDi74UAK"},{"type":"link","url":"https://discourse.pangeo.io/t/new-working-group-for-distributed-array-computing/2734","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"text","value":"Pangeo Working group on Distributed Arrays","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"tacugbrMXs"}],"urlSource":"https://discourse.pangeo.io/t/new-working-group-for-distributed-array-computing/2734","key":"JPWAfQzxUa"},{"type":"text","value":".","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"BCwuH7fksA"}],"key":"n9fB5PNU8P"},{"type":"paragraph","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"strong","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"text","value":"Acknowledgements:","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"f4BZgbQUJN"}],"key":"hnsTdYVMKD"},{"type":"text","value":" Thanks for Gabe for useful comments on a draft of this post, as well as to Gabe, Florian Jetter, and the rest of the dask dev team for the fix!","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"bQBf39XnNm"}],"key":"o9DNPdMYZM"}],"key":"iVT2E45mkE"}],"key":"FDLYet6vRH"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Cubed: Bounded-memory serverless array processing in xarray","url":"/blog/2023/cubed-xarray","group":"2023"},"next":{"title":"Easy IPCC part 1: Multi-Model Datatree","url":"/blog/2022/easy-ipcc-datatree","group":"2022"}}},"domain":"http://localhost:3000"},"project":{"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"title":"Welcome","thumbnail":"/build/profile-color-circle-098ce1dbdd1469313afcdeb609cd4bf4.png","authors":[{"id":"tom","nameParsed":{"literal":"Tom Nicholas","given":"Tom","family":"Nicholas"},"name":"Tom Nicholas","orcid":"0000-0002-2176-0530","github":"TomNicholas","url":"https://tom-nicholas.com"}],"github":"https://github.com/TomNicholas/tomnicholas.github.io","references":{"ttw":{"url":"https://book.the-turing-way.org"}},"toc":[{"file":"index.md"},{"file":"about.md"},{"children":[{"children":[{"pattern":"blog/2025/**{.ipynb,.md}"}],"title":"2025"},{"children":[{"pattern":"blog/2024/**{.ipynb,.md}"}],"title":"2024"},{"children":[{"pattern":"blog/2023/**{.ipynb,.md}"}],"title":"2023"},{"children":[{"pattern":"blog/2022/**{.ipynb,.md}"}],"title":"2022"},{"children":[{"pattern":"blog/2020/**{.ipynb,.md}"}],"title":"2020"},{"children":[{"pattern":"blog/2019/**{.ipynb,.md}"}],"title":"2019"}],"file":"blog.md"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"about","title":"About me","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"blog","title":"Blog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":2,"title":"2025"},{"slug":"blog.2025.science-needs-a-social-network","title":"Science needs a social network for sharing big data","description":"","date":"2025-01-18","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open-science","frost"],"level":3},{"level":2,"title":"2024"},{"slug":"blog.2024.datatree","title":"Xarray x NASA: xarray.DataTree for hierarchical data structures","description":"","date":"2024-12-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science"],"level":3},{"level":2,"title":"2023"},{"slug":"blog.2023.cubed-xarray","title":"Cubed: Bounded-memory serverless array processing in xarray","description":"","date":"2023-06-01","thumbnail":"/build/e35ec725ea00fd2a6250d35dd849930e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","dask","cubed","open-science"],"level":3},{"slug":"blog.2023.dask-distributed","title":"Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration","description":"","date":"2023-01-04","thumbnail":"/build/f8821db67c2a5f1f07b570e6bed342cc.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","dask","open-science"],"level":3},{"level":2,"title":"2022"},{"slug":"blog.2022.easy-ipcc-datatree","title":"Easy IPCC part 1: Multi-Model Datatree","description":"","date":"2022-08-29","thumbnail":"/build/d1061528b3e546e0e4d674dab265d6e2.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science","climate-science","datatree"],"level":3},{"slug":"blog.2022.pint-xarray","title":"Unit-aware arithmetic in Xarray, via pint","description":"","date":"2022-08-30","thumbnail":"/build/undefined","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","pint","open-science","physical-units"],"level":3},{"level":2,"title":"2020"},{"slug":"blog.2020.covid19-model","title":"Coronavirus: The Simplest Model","description":"","date":"2020-03-20","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","modelling","covid-19"],"level":3},{"slug":"blog.2020.deep-pseudoscience","title":"The faulty science, doomism, and flawed conclusions of Deep Adaptation","description":"","date":"2020-07-14","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate-science","misinformation"],"level":3},{"slug":"blog.2020.oxford-divests","title":"Oxford University Divestment Explained","description":"","date":"2020-04-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate","oxford"],"level":3},{"level":2,"title":"2019"},{"slug":"blog.2019.theconversation-fusion","title":"Nuclear Fusion: too late for the climate","description":"","date":"2019-09-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["fusion","energy","climate"],"level":3}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/build/manifest-B4831781.js";
import * as route0 from "/build/root-QGLRP2PL.js";
import * as route1 from "/build/routes/$-7JYT5576.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/build/entry.client-UNPC4GT3.js");</script></body></html>
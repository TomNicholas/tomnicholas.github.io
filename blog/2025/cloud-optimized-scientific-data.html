<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Fundamentals: What is Cloud-Optimized Scientific Data? - Welcome</title><meta property="og:title" content="Fundamentals: What is Cloud-Optimized Scientific Data? - Welcome"/><meta name="generator" content="mystmd"/><meta name="description" content="The article I wish I could have read back when I first heard of Zarr in 2018. Explains how object storage and conventional filesystems are different, and the key properties that make Zarr work so well in cloud object storage.
"/><meta property="og:description" content="The article I wish I could have read back when I first heard of Zarr in 2018. Explains how object storage and conventional filesystems are different, and the key properties that make Zarr work so well in cloud object storage.
"/><meta name="keywords" content=""/><meta name="image" content="/build/hdf5-layout-545e2d962422497360197b7e6452b40a.png"/><meta property="og:image" content="/build/hdf5-layout-545e2d962422497360197b7e6452b40a.png"/><link rel="stylesheet" href="/build/_assets/app-HG4THSM4.css"/><link rel="stylesheet" href="/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/favicon.ico"/><link rel="stylesheet" href="/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Tom Nicholas</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"><div class="relative inline-block mx-2 grow-0"><a class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75" href="/about">About</a></div><div class="relative inline-block mx-2 grow-0"><a aria-current="page" class="inline-flex items-center justify-center w-full mx-2 py-1 text-md font-medium dark:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 border-b border-stone-200" href="/blog">Blog</a></div></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R3iop:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode." aria-label="Toggle theme between light and dark mode."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white"><a class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded" href="/about">About</a><a aria-current="page" class="p-2 my-1 rounded-lg hover:bg-slate-300/30 block break-words focus:outline outline-blue-200 outline-2 rounded active" href="/blog">Blog</a></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white"><a title="Welcome" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/">Welcome</a><a title="About me" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/about">About me</a><div data-state="open" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a title="Blog" aria-current="page" class="block break-words focus:outline outline-blue-200 outline-2 rounded py-2 grow font-semibold text-blue-800 dark:text-blue-200 active" href="/blog">Blog</a><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rfd8p:" aria-expanded="true" data-state="open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="open" id="radix-:Rfd8p:" class="pl-3 pr-[2px] collapsible-content"><div data-state="open" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2025" class="block break-words rounded py-2 grow font-semibold text-blue-800 dark:text-blue-200 cursor-pointer">2025</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R6vd8p:" aria-expanded="true" data-state="open"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="open" id="radix-:R6vd8p:" class="pl-3 pr-[2px] collapsible-content"><a title="Fundamentals: What is Cloud-Optimized Scientific Data?" aria-current="page" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg bg-blue-300/30 active" href="/blog/2025/cloud-optimized-scientific-data">Fundamentals: What is Cloud-Optimized Scientific Data?</a><a title="Science needs a social network for sharing big data" class="block break-words focus:outline outline-blue-200 outline-2 rounded p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/blog/2025/science-needs-a-social-network">Science needs a social network for sharing big data</a></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2024" class="block break-words rounded py-2 grow cursor-pointer">2024</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Ravd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Ravd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2023" class="block break-words rounded py-2 grow cursor-pointer">2023</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Revd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Revd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2022" class="block break-words rounded py-2 grow cursor-pointer">2022</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rivd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rivd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2020" class="block break-words rounded py-2 grow cursor-pointer">2020</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rmvd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rmvd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><div data-state="closed" class="w-full"><div class="flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><div title="2019" class="block break-words rounded py-2 grow cursor-pointer">2019</div><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:Rqvd8p:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:Rqvd8p:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div></div></div></div></nav></div><div class="flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-grow"></div><a href="https://github.com/TomNicholas/tomnicholas.github.io" title="GitHub Repository: TomNicholas/tomnicholas.github.io" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rd4fop:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">Fundamentals: What is Cloud-Optimized Scientific Data?</h1><header class="mt-4 not-prose"><div><span class="font-semibold text-sm inline-block"><button class="focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R3kfop:" data-state="closed">Tom Nicholas</button><a class="ml-1" href="https://orcid.org/0000-0002-2176-0530" target="_blank" rel="noopener noreferrer" title="ORCID (Open Researcher and Contributor ID)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1rem" height="1rem" class="inline-block text-gray-400 hover:text-[#A9C751] -translate-y-[0.1em]"><path d="M21.8 12c0 5.4-4.4 9.8-9.8 9.8S2.2 17.4 2.2 12 6.6 2.2 12 2.2s9.8 4.4 9.8 9.8zM8.2 5.8c-.4 0-.8.3-.8.8s.3.8.8.8.8-.4.8-.8-.3-.8-.8-.8zm2.3 9.6h1.2v-6h1.8c2.3 0 3.3 1.4 3.3 3s-1.5 3-3.3 3h-3v1.1H9V8.3H7.7v8.2h5.9c3.3 0 4.5-2.2 4.5-4.1s-1.2-4.1-4.3-4.1h-3.2l-.1 7.1z"></path></svg></a></span></div></header><div class="flex mt-2 text-sm font-light"><time dateTime="2025-04-17" class="">April 17, 2025</time></div></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><p><em>Why naively lifting scientific data to the cloud falls flat.</em></p><p>(Originally posted on the <a target="_blank" rel="noreferrer" href="https://earthmover.io/blog/fundamentals-what-is-cloud-optimized-scientific-data" class="">Earthmover blog</a>)</p><h2 id="scientific-formats-predate-the-cloud" class="relative group"><span class="heading-text">Scientific formats predate the cloud</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#scientific-formats-predate-the-cloud" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>There are exabytes of scientific data out in the wild, with more being generated every year. At Earthmover we believe the best place for it to reside is in the cloud, in object storage. Cloud platforms are the state-of-the-art for managing tabular business data, and scientific data teams deserve similarly powerful tools. The <a target="_blank" rel="noreferrer" href="https://pangeo.io/" class="">Pangeo project</a> has shown how the cloud can work for <a target="_blank" rel="noreferrer" href="https://earthmover.io/blog/tensors-vs-tables" class="">array data</a> too, enabling efficient storage of enormous scientific datasets, scalable data-proximate compute, and <a target="_blank" rel="noreferrer" href="https://medium.com/pangeo/step-by-step-guide-to-building-a-big-data-portal-e262af1c2977" class="">sharing public data</a> far and wide.</p><p>Unfortunately, most scientific array file formats (such as NetCDF, HDF5, TIFF, and GRIB) predate the cloud, so were never designed with access from cloud object storage in mind. We will demonstrate why naively moving netCDF files to the cloud results in deathly slow performance, and show you how Zarr, and other “cloud-optimized” data formats, solve this problem.</p><p><em>This post is for you if you’re responsible for managing an archive of scientific data and are curious about what a cloud migration would look like. It’s also for you if you’re just interested in learning more about how these formats work! If you’re not a developer or data engineer, you should still be able to follow along.</em></p><h2 id="object-storage-is-not-a-filesystem" class="relative group"><span class="heading-text">Object storage is not a filesystem</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#object-storage-is-not-a-filesystem" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Cloud object storage (such as Amazon S3) and filesystems (like the one on your laptop) are both data storage systems, but are crucially different. We need to understand those differences to see why cloud-optimizing data is important.</p><p>Files are containers for data (each a series of bytes) that’s physically on your computer and managed by your Operating System. They are close at hand and fast to scan through. Imagine cooking in your own kitchen - you need to open the fridge to access ingredients (opening a file), it’s quick to look through what you have (fast to scan through the file), you need to put everything away and close the fridge door when you’re done (closing the file), and if someone else is blocking the fridge you have to wait until they are done (files are locked whilst another process edits them). This ingredient storage system is optimized for immediate use by one person at a time, to quickly examine a small number of close-at-hand items.</p><p>Object storage is similar in that each object is also a container for a series of bytes, but the way you access that data is different. There is no concept of “opening files”. Instead, all you can do is say “I would like to get this part of that object, please”, or “I would like to put some bytes into this location, please”. You interact with object storage only through these much simpler operations, such as GET, PUT, LIST, or DELETE, all sent over the network as HTTP requests.</p><p>Reading data from object storage is more like ordering ingredients directly from Costco. Instead of accessing ingredients directly, you submit specific orders (the GET requests). Each individual item takes time to deliver (called “latency”), but you can place many orders simultaneously, and the same distributor can fulfill orders for many customers at once. However, for this to work you need to know what is available and what you want to order in advance. This system is designed for scale rather than individual efficiency.</p><h2 id="lousy-latency" class="relative group"><span class="heading-text">Lousy latency</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#lousy-latency" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The most important difference for this post is the “latency”, the delay between asking for a piece of data and receiving the first few bytes of that data. (Or between placing your Costco order and receiving it).</p><p><strong>Latency with object storage is much higher than for a local filesystem.</strong> When you read a piece of data from part of a file sitting on your laptop, moving the pointer to the correct location in the file to begin reading the first few bytes into RAM takes ~1 millisecond. But to get a piece of data from object storage using a GET request takes a <a target="_blank" rel="noreferrer" href="https://blog.cloud-mercato.com/understand-object-storage-by-its-performance/" class="">few 10’s of milliseconds</a> from the moment you send the request over the network to the moment you receive the first byte back. <em>Spoiler: this will be a problem.</em></p><h2 id="describe-yourself-in-8-bytes" class="relative group"><span class="heading-text">Describe yourself in 8 bytes</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#describe-yourself-in-8-bytes" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Formats like netCDF are amazing because they are self-describing. The information required to understand the data in the file (known as the metadata) is present in the file itself, so you can simply read that one netCDF file to learn that it contains, for example, two arrays named “temperature” and “precipitation”, each of which is arranged as a 100x100x10 grid of 32-bit float values. Without this metadata you would either have had to know a priori what was in there, or just guess what it meant. Self-describing data formats were a major step forward for reproducible science and sanity in general.</p><p>But formats like netCDF/HDF5 are commonly sub-optimal for object storage because the descriptions of the contents are spread throughout the file. The tiny part that tells you that the first array is called “temperature” and the other tiny part that tells you that the second array is called “precipitation” are not adjacent; they are separated from one another by all of the thousands of actual temperature numeric data values. That means to find out a few kBs of information (all the metadata), you may have to comb through the entire file, which could be MBs or even GBs in size. Imagine if you had to walk through the entire Costco store just to find out what departments they have.</p><figure id="kDL7QhIWK7" class="fig-figure"><img id="vCbJZgOHBS" style="margin:0 auto" src="/build/hdf5-layout-545e2d962422497360197b7e6452b40a.png" alt="diagram of the layout of metadata and chunks within a HDF file" data-canonical-url="images/hdf5-layout.png"/><figcaption class="group"><p>A schematic of the layout of metadata within non-cloud-optimized HDF5/netCDF4 files. The metadata is scattered throughout the whole file, separated by large distances by the raw data chunks. From <a target="_blank" rel="noreferrer" href="https://guide.cloudnativegeo.org/cloud-optimized-netcdf4-hdf5/#why-accessing-hdf5-on-the-cloud-is-slow" class="">Barrett et. al. 2024</a>.</p></figcaption></figure><h2 id="death-by-a-thousand-gets" class="relative group"><span class="heading-text">Death by a thousand GETs</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#death-by-a-thousand-gets" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Presented with a URL pointing to a mystery file sitting in object storage, you must begin by issuing one GET request for the first few bytes (called the <a href="https://en.wikipedia.org/wiki/List_of_file_signatures" class="italic" target="_blank" rel="noreferrer" data-state="closed">“magic” bytes</a>), and wait for that to come back to learn that this is, in fact, a netCDF file. Then you can issue another GET request for some other set of bytes to learn that this file contains an array called “temperature” of size 1GB. Only once that comes back do you know how many bytes to jump forward for another GET request to learn that the next array is called “precipitation”.</p><p>This is not a problem for a local filesystem. Your pointer starts at the start of the file, and using the filesystem’s seek operation to move it to a new location is very speedy (~0.1 milliseconds on an SSD), so scanning through the entire file by moving the pointer forwards lots of times in a row is no big deal.</p><p>But to read a lone netCDF file in object storage you have to issue many GET requests, one after another, each of which adds another round-trip’s worth of latency. As we learned above, latency for object storage is very high, so this rapidly adds up.</p><p>Let’s demonstrate. <a target="_blank" rel="noreferrer" href="https://gist.github.com/TomNicholas/1973624099b207a0550f66ed20cabc37" class="">This demo</a> shows what happens when you naively try to open a 1GB (3GB uncompressed) netCDF file in a public S3 bucket using Xarray, and print all the metadata you might care about (e.g. array names and sizes), by reading it as if it were a local file. Each filesystem read call is translated into one HTTP GET request, with no special treatment like caching or pre-fetching.</p><p>As expected, the performance is atrocious - it takes the better part of a minute just to read the metadata, making 502 separate GET requests just to download a grand total of 267KB. That’s an effective bandwidth of only 7 KB/s, far slower than even 1990’s-era dial-up internet.</p><p>(Note there are many ways this could be optimized, such as by caching, pre-fetching, or <a target="_blank" rel="noreferrer" href="https://discourse.pangeo.io/t/pangeo-showcase-hdf5-at-the-speed-of-zarr/" class="">repacking</a> metadata. Even using the <code>netCDF4-python</code> library out-of-the-box would perform somewhat better. But the point is that if you do not or cannot alter the files, and you naively treat object storage as if it’s a local filesystem, you will get abysmal performance.)</p><p>You could instead ask to download the entire file up front, which means downloading all the data when you really only wanted to see the metadata to know what’s inside. But then you are downloading millions or billions of times more data than you know you will need.</p><figure id="eAoSIqaFOP" class="fig-figure"><img id="ZyJeCcGXky" style="margin:0 auto" src="/build/qui-downloads-300dpi-bb1550ec218e5ff152371dcb33fc980d.png" alt="cartoon of a old man saying to a child &quot;When I was a lad, we had to download all the data before we could look at it!&quot;" data-canonical-url="images/qui-downloads-300dpi.png"/><figcaption class="group"><p><a target="_blank" rel="noreferrer" href="https://github.com/zarr-developers/zarr-illustrations-falk-2022?tab=readme-ov-file#qui-downloads" class="">Zarr cartoon</a> about how having to download all the data before looking at any of it is an antiquated paradigm.</p></figcaption></figure><p>Even worse - this is all for one file. Most datasets of interest consist of thousands of netCDF files, making these problems a thousand times worse! It can potentially take hours just to open such a dataset on the cloud. This sucks, and is ultimately all a consequence of the data not being “cloud-optimized”.</p><h2 id="a-series-of-fat-pipes" class="relative group"><span class="heading-text">A series of fat pipes</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#a-series-of-fat-pipes" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>At this point you are probably wondering, “if the latency of the cloud is so high then what is so good about it?” The answer is that what object storage lacks in latency it more than makes up for in throughput.</p><p>If the internet is famously <a href="https://en.wikipedia.org/wiki/Series_of_tubes" class="italic" target="_blank" rel="noreferrer" data-state="closed">“a series of tubes”</a>, then the cloud is a series of fat pipes. Inside a data center, the object storage is connected to the compute resources via connections of enormous bandwidth. Whilst it might take a moment between you asking for the tap to be turned on and water starting to flow, once it begins you will quickly be drenched by a massive firehose of data coming through that fat pipe.</p><p>The total amount of data transferred divided by the total time it took to transfer it is called throughput. The throughput of object storage can be through the roof - the <a target="_blank" rel="noreferrer" href="https://shivaram.org/publications/pywren-socc17.pdf" class="">PyWren paper</a> demonstrated linear scaling to aggregate read throughputs of 80GB/s on S3, with no signs of slowing at even larger scales. This kind of performance is comparable to that of the expensive filesystems of <a target="_blank" rel="noreferrer" href="https://www.olcf.ornl.gov/wp-content/uploads/2-15-23-Frontier-System-Architecture-public-v7.pdf" class="">top supercomputers</a>, but on far cheaper commodity hardware instead of specialized HPC hardware, and available to anyone.</p><p>How do we achieve this massive throughput? The problem we saw with the metadata is not that we’re doing a lot of GET operations – the cloud is actually great at that – it’s rather that we’re doing all those GETs sequentially, one after the other. If we only needed to issue one GET request we would only have to wait once, and if we were able to somehow immediately issue all the GET requests we were ever going to need, the power of object storage is that it can send all the results back to us simultaneously, thereby taking full advantage of the fat pipe. (In the Costco analogy, you could submit an order for a literal truckload of apples.)</p><h2 id="idea-separate-the-metadata" class="relative group"><span class="heading-text">Idea: Separate the metadata</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#idea-separate-the-metadata" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>So to benefit from object storage, traditional netCDF isn’t going to work - we have to change something. The first problem to solve is needing to do all those sequential GETs just to retrieve a very small amount of metadata.</p><p>If that metadata were instead separated out into a known location (for example, a separate accompanying “sidecar” file), we could simply issue one GET request for the entire contents of that small metadata file. Then we would know everything about the structure of the rest of the data after just one round trip’s worth of latency, which is the fastest we could possibly have learnt about anything in object storage. (Costco now has a catalog.)</p><p>Separating the metadata from the data is also what allows scalability - more data no longer implies searching for longer to find the metadata, as it’s always separated into a known location.</p><h2 id="idea-split-the-data-into-chunks" class="relative group"><span class="heading-text">Idea: Split the data into chunks</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#idea-split-the-data-into-chunks" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Once we know what’s in the dataset, the other problem is how to get only the parts of the data we actually want, while taking advantage of the massive throughput object storage offers.</p><p><strong>If we split each data array into many small chunks, then we can download only the subset of data we actually want to use.</strong> For example, all chunks that make up the most recent satellite image of a certain location. If each chunk is a separate file, then we can easily request them independently and in parallel, potentially all at once through our fat pipe.</p><p>(If you’re really paying attention you might ask: “If small is good why don’t we just make the chunks as small as possible?” One reason is that we also want to compress each chunk to save storage space. There is a trade-off between larger chunks, which compress more efficiently, and smaller chunks, which allow you to make more targeted requests.)</p><p>NetCDF and HDF5 <a target="_blank" rel="noreferrer" href="https://www.unidata.ucar.edu/software/netcdf/workshops/2011/nc4chunking/WhatIsChunking.html" class="">already use chunking internally within their file formats</a>. However, the information about the chunks (another form of metadata) is relatively slow to access on object storage, for the reasons described above, meaning that it isn’t trivial to just grab the chunks we want. You also need to split the chunks out if you want to partially update an existing dataset in the cloud, because object storage doesn’t allow you to edit files, only replace them in their entirety.</p><h2 id="congratulations-thats-zarr" class="relative group"><span class="heading-text">Congratulations! That’s Zarr.</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#congratulations-thats-zarr" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>So let’s invent a new file format designed to work beautifully with object storage, with separate files for the metadata and splitting the data into chunks. Oh wait - that already exists: it’s called Zarr.</p><p>This isn’t facetious - Zarr really is faster because of these two main reasons. In fact, you can clearly see it in this diagram of the internal structure of an example Zarr store.</p><figure id="Q90CRMRGmJ" class="fig-figure"><img id="cadUNrXgN2" style="margin:0 auto" src="/build/zarr-layout-26ba2c05dc596ac7eb88fe501dfd2055.png" alt="diagram of the internal layout of a Zarr v3 store" data-canonical-url="images/zarr-layout.png"/><figcaption class="group"><p>Diagram of the structure of a Zarr v3 store, showing how the metadata is separated into dedicated files, and the data is split into chunks.</p></figcaption></figure><p>All the metadata for a particular array are in one <code>zarr.json</code> file, which can be retrieved with a single GET request. The actual data arrays are split into grids of chunk files, any set of which can be retrieved simultaneously using one GET request per chunk.</p><p>Back in 2018, there were <a target="_blank" rel="noreferrer" href="https://matthewrocklin.com/blog/work/2018/02/06/hdf-in-the-cloud" class="">various ideas</a> for overcoming cloud latency, but it’s cloud-optimized formats such as Zarr, <a target="_blank" rel="noreferrer" href="https://cogeo.org/" class="">Cloud-Optimized GeoTIFF</a> (a.k.a. COG), and even <a target="_blank" rel="noreferrer" href="https://ntrs.nasa.gov/api/citations/20240008354/downloads/Cloud_Optimized.pdf" class="">cloud-optimized HDF5</a> that have taken off within climate, weather, microscopy, and other scientific data communities.</p><p>Note that none of these ideas were invented by Zarr. Commercial cloud object storage is almost 20 years old(!) and cloud-optimized tabular formats such as Avro and Parquet were developed to take full advantage soon afterwards. (Parquet was a direct inspiration for Zarr.) To understand why we can’t just use tabular formats for scientific data read our recent <a target="_blank" rel="noreferrer" href="https://earthmover.io/blog/tensors-vs-tables" class="">fundamentals post on tensors vs tables</a>.</p><h2 id="consolidating-power-metadata" class="relative group"><span class="heading-text">Consolidating ~~power~~ metadata</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#consolidating-power-metadata" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>However, this still isn’t perfect. Zarr’s native format on object storage stores metadata for each array in a dedicated file, i.e. it has one <code>zarr.json</code> file to go get per array. Some datasets have hundreds of different arrays, so it would be considerably more efficient still if all the metadata for all the arrays were somehow in one json file.</p><p>That’s what Zarr’s “consolidated metadata” feature is: one weird trick to minimize the number of GET requests, by consolidating all the metadata into one <code>zarr.json</code> file at the root of the Zarr store. Consolidated metadata is arguably a bit of a hack, but because Xarray actually writes this by default, many existing Zarr stores have it already.</p><h2 id="icechunk-consolidated-metadata-version-control" class="relative group"><span class="heading-text">Icechunk: Consolidated metadata + version control</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#icechunk-consolidated-metadata-version-control" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Earthmover’s open-source format <a target="_blank" rel="noreferrer" href="https://icechunk.io/" class="">Icechunk</a> takes consolidated metadata and runs with it. Like a conventional Zarr store, Icechunk also stores all the metadata and chunks as separate objects, but Icechunk also has a system for tracking version history of all those objects, providing git-like version-control features for your data. You can think of it as tracking successive versions of consolidated metadata, each of which describes the state of your entire Zarr store at one point in its history. For more details, read the <a target="_blank" rel="noreferrer" href="https://earthmover.io/blog/icechunk" class="">Icechunk launch blog post</a>, or watch the <a target="_blank" rel="noreferrer" href="https://youtu.be/idrdJ0kAOQU?si=-pUbdRSj2Acb3z86" class="">webinar on version control with icechunk</a>.</p><p>As the metadata is always consolidated, Icechunk also minimizes the number of GET requests required to open the dataset. We ran a simple benchmark to confirm this.</p><figure id="soiCSYQEn1" class="fig-figure"><img id="cpIWvn4ueM" style="margin:0 auto" src="/build/opening_comparison-2f940958a8b752bb11ae137fe6b8e77a.png" alt="bar chart showing time taken and number of HTTP GET requests required to use xarray to open a netCDF4 file, Zarr store, and Icechunk store" data-canonical-url="images/opening_comparison.png"/><figcaption class="group"><p>Benchmarking results for calling <code>xarray.open_dataset</code> on a single file (1GB compressed, 3GB uncompressed) of <a target="_blank" rel="noreferrer" href="https://registry.opendata.aws/noaa-oar-arl-nacc-pds/" class="">NOAA GFS data</a>, stored in different formats. Code was run from a laptop in New York, so the time reflects latency to reach the data in AWS <code>us-east-1</code>. Code to reproduce the results is <a target="_blank" rel="noreferrer" href="https://gist.github.com/TomNicholas/1973624099b207a0550f66ed20cabc37" class="">available on Github</a>.</p></figcaption></figure><p>Our benchmark compares the number of HTTP requests issued, and the overall time taken to call <code>xarray.open_dataset</code> on 1GB’s worth of array data stored in S3. It includes the netCDF demo from earlier, compared against the same data stored as native Zarr, Zarr with consolidated metadata, and as icechunk.</p><p>While Zarr with consolidated metadata minimizes the number of HTTP GET requests required overall, <strong>Icechunk has similar speed advantages, and all the power of transactions and version control!</strong></p><p>(For the more technical amongst you see the footnotes about this benchmark at the end of the article.)</p><h2 id="high-throughput-means-low-cost" class="relative group"><span class="heading-text">High throughput means low cost</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#high-throughput-means-low-cost" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>That’s latency. For throughput, thanks to optimizations in <a target="_blank" rel="noreferrer" href="https://earthmover.io/blog/zarr3-release" class="">Zarr-Python 3</a> and <a target="_blank" rel="noreferrer" href="https://earthmover.io/blog/icechunk#:~:text=new%20async%20API.-,performance,-At%20this%20stage" class="">Icechunk</a>, our open-source software stack is now approaching the <a target="_blank" rel="noreferrer" href="https://earthmover.io/blog/icechunk#:~:text=new%20async%20API.-,performance,-At%20this%20stage" class="">theoretical limits</a> of maximum possible throughput. So when streaming data from object storage to cloud compute within the same datacentre, you can use the full bandwidth of those fat pipes.</p><p>This translates to big cost savings. Multi-dimensional data analysis workloads are often IO-bound, meaning that the CPUs you’re paying for spend most of their time waiting for data to come in, not actually computing on it. So the <a target="_blank" rel="noreferrer" href="https://earthmover.io/blog/nasa-icechunk#:~:text=In%20the%20benchmark%20shown%20below%2C%20we%20were%20able%20to%20extract%20a%20month%2Dlong%20time%20series%20from%20GPM%20IMERG%20data%20stored%20in%20S3%20in%20just%203%20seconds.%20In%20comparison%2C%20the%20previous%20cloud%2Dbased%20approach%20takes%205%20minutes!" class="">100x speedup</a> we see for NASA data using Zarr and Icechunk compared to using non-cloud-optimized netCDF translates to 100x less time you’re paying for CPUs to sit around, and so 100x lower cloud computing bills!</p><h2 id="no-free-lunch" class="relative group"><span class="heading-text">No free lunch</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#no-free-lunch" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Whilst using cloud-optimized data in the cloud is generally a no-brainer, there are some downsides to the cloud approach.</p><p>Object storage always has high time-to-first-byte. If reacting to new data as fast as physically possible really matters to you (e.g., because you’re doing high-frequency trading), then you should not use object storage at all. High-frequency trading is an example of a <a target="_blank" rel="noreferrer" href="https://aws.amazon.com/compare/the-difference-between-olap-and-oltp/" class="">“transactional” workload</a> because the objective is to make a decision and write a small amount of information back as fast as possible (to make the trade). Object storage is better suited for “analytical” workloads, in which a larger amount of data is ingested for important but not subsecond-urgent querying. These analytical workloads are plenty common within scientific and geospatial domains.</p><p>Using a new file format generally requires copying the original data. That requires both more storage space to hold the copy as well as compute to perform the copying. But what if we didn’t have to copy all the data? Look out for a future blog post about “Virtual Zarr”...</p><h2 id="towards-the-great-scientific-supercomputer-in-the-sky" class="relative group"><span class="heading-text">Towards the great scientific supercomputer in the sky</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#towards-the-great-scientific-supercomputer-in-the-sky" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Hopefully now next time you hear “cloud-optimized data” you will understand that it’s really just about separating the metadata from the chunks, and fetching things efficiently.</p><p>But our vision for working with scientific data in the cloud requires more than just cloud-optimizing files and dumping them into cloud buckets. Ideally we want to forget about files entirely and just live in a world of seamless cloud data lakes. But that will have to wait until next time!</p><h3 id="footnotes" class="relative group"><span class="heading-text">Footnotes:</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#footnotes" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><ul><li>When <a href="https://github.com/pydata/xarray/pull/1528" class="italic" target="_blank" rel="noreferrer" data-state="closed">Ryan and Joe first integrated Zarr with Xarray in 2017</a>, it wasn’t even possible to open netCDF in the cloud directly without downloading the entire file.</li><li>Recent improvements to opening netCDF directly, such as <a target="_blank" rel="noreferrer" href="https://guide.cloudnativegeo.org/cloud-optimized-netcdf4-hdf5/" class="">“cloud-optimized HDF5”</a>, are using these same ideas, and so are formats such as COG and Parquet.</li><li>Zarr’s performance on this chart used to be a lot worse - big <a target="_blank" rel="noreferrer" href="https://earthmover.io/blog/xarray-open-zarr-improvements" class="">improvements</a> were made to the Zarr-Python library by the open-source community.</li><li>The reason the number of requests and total time don’t just scale in lockstep is because if you issue a lot of requests all at once it only takes one round-trip’s worth of latency to get them all back. That’s basically what Zarr without consolidated metadata is doing.</li><li>For a larger subset of GFS containing more files, netCDF would take even longer as the metadata of every file would need to be read, while Zarr and Icechunk would require approximately the same amount of time. So Zarr &amp; Icechunk are the only options here that can scale to accessing truly massive datasets.</li></ul><div></div><div class="flex pt-10 mb-10 space-x-4"><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/blog"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="text-xs text-gray-500 dark:text-gray-400">Welcome</div>Blog</div></div></a><a class="flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700" href="/blog/2025/science-needs-a-social-network"><div class="flex h-full align-middle"><div class="flex-grow"><div class="text-xs text-gray-500 dark:text-gray-400">2025</div>Science needs a social network for sharing big data</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></main></article><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/build/_shared/chunk-IZFMW3M4.js"/><link rel="modulepreload" href="/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/build/_shared/chunk-CPTH56EW.js"/><link rel="modulepreload" href="/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/build/_shared/chunk-S4SWV34C.js"/><link rel="modulepreload" href="/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/build/root-QGLRP2PL.js"/><link rel="modulepreload" href="/build/_shared/chunk-CB3BH7WY.js"/><link rel="modulepreload" href="/build/routes/$-7JYT5576.js"/><script>window.__remixContext = {"url":"/blog/2025/cloud-optimized-scientific-data","state":{"loaderData":{"root":{"config":{"version":1,"myst":"1.3.25","options":{"favicon":"/build/profile-color-circle-bd35dc9b32b8777ff187f92c42dd088a.png","logo_text":"Tom Nicholas","folders":true},"nav":[{"title":"About","url":"/about"},{"title":"Blog","url":"/blog"}],"actions":[],"projects":[{"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"title":"Welcome","thumbnail":"/build/profile-color-circle-ce3d4b6b03511453d680d13ef02e6d5e.png","authors":[{"id":"tom","nameParsed":{"literal":"Tom Nicholas","given":"Tom","family":"Nicholas"},"name":"Tom Nicholas","orcid":"0000-0002-2176-0530","github":"TomNicholas","url":"https://tom-nicholas.com"}],"github":"https://github.com/TomNicholas/tomnicholas.github.io","references":{"ttw":{"url":"https://book.the-turing-way.org"}},"toc":[{"file":"index.md"},{"file":"about.md"},{"children":[{"children":[{"pattern":"blog/2025/**{.ipynb,.md}"}],"title":"2025"},{"children":[{"pattern":"blog/2024/**{.ipynb,.md}"}],"title":"2024"},{"children":[{"pattern":"blog/2023/**{.ipynb,.md}"}],"title":"2023"},{"children":[{"pattern":"blog/2022/**{.ipynb,.md}"}],"title":"2022"},{"children":[{"pattern":"blog/2020/**{.ipynb,.md}"}],"title":"2020"},{"children":[{"pattern":"blog/2019/**{.ipynb,.md}"}],"title":"2019"}],"file":"blog.md"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"about","title":"About me","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"blog","title":"Blog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":2,"title":"2025"},{"slug":"blog.2025.cloud-optimized-scientific-data","title":"Fundamentals: What is Cloud-Optimized Scientific Data?","description":"The article I wish I could have read back when I first heard of Zarr in 2018. Explains how object storage and conventional filesystems are different, and the key properties that make Zarr work so well in cloud object storage.\n","date":"2025-04-17","thumbnail":"/build/hdf5-layout-545e2d962422497360197b7e6452b40a.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud","zarr","netcdf","earthmover","open-science"],"level":3},{"slug":"blog.2025.science-needs-a-social-network","title":"Science needs a social network for sharing big data","description":"Imagine being able to visit one website, search for any scientific dataset from any institution in the world, preview it, then stream the data out at high speed, in the format you prefer. We have the technology - here's what we should build.\n","date":"2025-01-18","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open-science","frost"],"level":3},{"level":2,"title":"2024"},{"slug":"blog.2024.datatree","title":"Xarray x NASA: xarray.DataTree for hierarchical data structures","description":"How xarray's new DataTree feature came about, and thoughts on how public agencies can support the open-source scientific software that they depend on.\n","date":"2024-12-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science"],"level":3},{"level":2,"title":"2023"},{"slug":"blog.2023.cubed-xarray","title":"Cubed: Bounded-memory serverless array processing in xarray","description":"Cubed was designed to address the main problems with Dask, so I integrated it with Xarray. \n","date":"2023-06-01","thumbnail":"/build/e35ec725ea00fd2a6250d35dd849930e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","dask","cubed","open-science"],"level":3},{"slug":"blog.2023.dask-distributed","title":"Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration","description":"Dask's distributed scheduler algorithm got a major fix after we tested its' limits on a huge oceanography analysis problem.\n","date":"2023-01-04","thumbnail":"/build/f8821db67c2a5f1f07b570e6bed342cc.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","dask","open-science"],"level":3},{"level":2,"title":"2022"},{"slug":"blog.2022.easy-ipcc-datatree","title":"Easy IPCC part 1: Multi-Model Datatree","description":"Analysing CMPI6 data as a motivation for xarray DataTree.\n","date":"2022-08-29","thumbnail":"/build/d1061528b3e546e0e4d674dab265d6e2.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science","climate-science","datatree"],"level":3},{"slug":"blog.2022.pint-xarray","title":"Unit-aware arithmetic in Xarray, via pint","description":"All scientific computations involve units, so let's make our analysis software aware of them.\n","date":"2022-08-30","thumbnail":"/build/df49524368335f9010ca432f9849200d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","pint","open-science","physical-units"],"level":3},{"level":2,"title":"2020"},{"slug":"blog.2020.covid19-model","title":"Coronavirus: The Simplest Model","description":"Solving the simplest possible epidemiological model of the spread of COVID-19.\n","date":"2020-03-20","thumbnail":"/build/SIRD_states-6497527278df07e7cd2669ebaeafb6cc.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","modelling","covid-19"],"level":3},{"slug":"blog.2020.deep-pseudoscience","title":"The faulty science, doomism, and flawed conclusions of Deep Adaptation","description":"Calling out pseudoscience claiming that societal collapse due to climate change is inevitable. \n","date":"2020-07-14","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate-science","misinformation"],"level":3},{"slug":"blog.2020.oxford-divests","title":"Oxford University Divestment Explained","description":"Thought's on Oxford University's fossil fuel divestment motion.\n","date":"2020-04-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate","oxford"],"level":3},{"level":2,"title":"2019"},{"slug":"blog.2019.theconversation-fusion","title":"Nuclear Fusion: too late for the climate","description":"Don't let politicians use funding for nuclear fusion research as greenwashing.\n","date":"2019-09-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["fusion","energy","climate"],"level":3}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static"},"routes/$":{"config":{"version":1,"myst":"1.3.25","options":{"favicon":"/build/profile-color-circle-bd35dc9b32b8777ff187f92c42dd088a.png","logo_text":"Tom Nicholas","folders":true},"nav":[{"title":"About","url":"/about"},{"title":"Blog","url":"/blog"}],"actions":[],"projects":[{"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"title":"Welcome","thumbnail":"/build/profile-color-circle-ce3d4b6b03511453d680d13ef02e6d5e.png","authors":[{"id":"tom","nameParsed":{"literal":"Tom Nicholas","given":"Tom","family":"Nicholas"},"name":"Tom Nicholas","orcid":"0000-0002-2176-0530","github":"TomNicholas","url":"https://tom-nicholas.com"}],"github":"https://github.com/TomNicholas/tomnicholas.github.io","references":{"ttw":{"url":"https://book.the-turing-way.org"}},"toc":[{"file":"index.md"},{"file":"about.md"},{"children":[{"children":[{"pattern":"blog/2025/**{.ipynb,.md}"}],"title":"2025"},{"children":[{"pattern":"blog/2024/**{.ipynb,.md}"}],"title":"2024"},{"children":[{"pattern":"blog/2023/**{.ipynb,.md}"}],"title":"2023"},{"children":[{"pattern":"blog/2022/**{.ipynb,.md}"}],"title":"2022"},{"children":[{"pattern":"blog/2020/**{.ipynb,.md}"}],"title":"2020"},{"children":[{"pattern":"blog/2019/**{.ipynb,.md}"}],"title":"2019"}],"file":"blog.md"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"about","title":"About me","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"blog","title":"Blog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":2,"title":"2025"},{"slug":"blog.2025.cloud-optimized-scientific-data","title":"Fundamentals: What is Cloud-Optimized Scientific Data?","description":"The article I wish I could have read back when I first heard of Zarr in 2018. Explains how object storage and conventional filesystems are different, and the key properties that make Zarr work so well in cloud object storage.\n","date":"2025-04-17","thumbnail":"/build/hdf5-layout-545e2d962422497360197b7e6452b40a.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud","zarr","netcdf","earthmover","open-science"],"level":3},{"slug":"blog.2025.science-needs-a-social-network","title":"Science needs a social network for sharing big data","description":"Imagine being able to visit one website, search for any scientific dataset from any institution in the world, preview it, then stream the data out at high speed, in the format you prefer. We have the technology - here's what we should build.\n","date":"2025-01-18","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open-science","frost"],"level":3},{"level":2,"title":"2024"},{"slug":"blog.2024.datatree","title":"Xarray x NASA: xarray.DataTree for hierarchical data structures","description":"How xarray's new DataTree feature came about, and thoughts on how public agencies can support the open-source scientific software that they depend on.\n","date":"2024-12-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science"],"level":3},{"level":2,"title":"2023"},{"slug":"blog.2023.cubed-xarray","title":"Cubed: Bounded-memory serverless array processing in xarray","description":"Cubed was designed to address the main problems with Dask, so I integrated it with Xarray. \n","date":"2023-06-01","thumbnail":"/build/e35ec725ea00fd2a6250d35dd849930e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","dask","cubed","open-science"],"level":3},{"slug":"blog.2023.dask-distributed","title":"Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration","description":"Dask's distributed scheduler algorithm got a major fix after we tested its' limits on a huge oceanography analysis problem.\n","date":"2023-01-04","thumbnail":"/build/f8821db67c2a5f1f07b570e6bed342cc.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","dask","open-science"],"level":3},{"level":2,"title":"2022"},{"slug":"blog.2022.easy-ipcc-datatree","title":"Easy IPCC part 1: Multi-Model Datatree","description":"Analysing CMPI6 data as a motivation for xarray DataTree.\n","date":"2022-08-29","thumbnail":"/build/d1061528b3e546e0e4d674dab265d6e2.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science","climate-science","datatree"],"level":3},{"slug":"blog.2022.pint-xarray","title":"Unit-aware arithmetic in Xarray, via pint","description":"All scientific computations involve units, so let's make our analysis software aware of them.\n","date":"2022-08-30","thumbnail":"/build/df49524368335f9010ca432f9849200d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","pint","open-science","physical-units"],"level":3},{"level":2,"title":"2020"},{"slug":"blog.2020.covid19-model","title":"Coronavirus: The Simplest Model","description":"Solving the simplest possible epidemiological model of the spread of COVID-19.\n","date":"2020-03-20","thumbnail":"/build/SIRD_states-6497527278df07e7cd2669ebaeafb6cc.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","modelling","covid-19"],"level":3},{"slug":"blog.2020.deep-pseudoscience","title":"The faulty science, doomism, and flawed conclusions of Deep Adaptation","description":"Calling out pseudoscience claiming that societal collapse due to climate change is inevitable. \n","date":"2020-07-14","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate-science","misinformation"],"level":3},{"slug":"blog.2020.oxford-divests","title":"Oxford University Divestment Explained","description":"Thought's on Oxford University's fossil fuel divestment motion.\n","date":"2020-04-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate","oxford"],"level":3},{"level":2,"title":"2019"},{"slug":"blog.2019.theconversation-fusion","title":"Nuclear Fusion: too late for the climate","description":"Don't let politicians use funding for nuclear fusion research as greenwashing.\n","date":"2019-09-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["fusion","energy","climate"],"level":3}]}]},"page":{"version":1,"kind":"Notebook","sha256":"34af837b1b74b2da3f15533a37fde9d52aa07d46825234892262ea85e348e598","slug":"blog.2025.cloud-optimized-scientific-data","location":"/blog/2025/cloud-optimized-scientific-data.md","dependencies":[],"frontmatter":{"title":"Fundamentals: What is Cloud-Optimized Scientific Data?","description":"The article I wish I could have read back when I first heard of Zarr in 2018. Explains how object storage and conventional filesystems are different, and the key properties that make Zarr work so well in cloud object storage.\n","tags":["cloud","zarr","netcdf","earthmover","open-science"],"date":"2025-04-17","kernelspec":{"name":"python3","display_name":"Python 3"},"authors":[{"id":"tom","nameParsed":{"literal":"Tom Nicholas","given":"Tom","family":"Nicholas"},"name":"Tom Nicholas","orcid":"0000-0002-2176-0530","github":"TomNicholas","url":"https://tom-nicholas.com"}],"github":"https://github.com/TomNicholas/tomnicholas.github.io","abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"numbering":{"title":{"offset":2}},"edit_url":"https://github.com/TomNicholas/tomnicholas.github.io/blob/main/blog/2025/cloud-optimized-scientific-data.md","thumbnail":"/build/hdf5-layout-545e2d962422497360197b7e6452b40a.png","exports":[{"format":"md","filename":"cloud-optimized-scientific-data.md","url":"/build/cloud-optimized-scie-b21059f9aa52c0fdba7010b41735addf.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Why naively lifting scientific data to the cloud falls flat.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"lvHgAK49cW"}],"key":"bohsp051bI"}],"key":"mbR0BkwA9s"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"(Originally posted on the ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"W1ULy8eoXs"},{"type":"link","url":"https://earthmover.io/blog/fundamentals-what-is-cloud-optimized-scientific-data","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Earthmover blog","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"RgcKz8vaOt"}],"urlSource":"https://earthmover.io/blog/fundamentals-what-is-cloud-optimized-scientific-data","key":"YQ9opWQIzE"},{"type":"text","value":")","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"vXoDh2KHx1"}],"key":"ueP1QVodxa"},{"type":"heading","depth":2,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Scientific formats predate the cloud","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"VeTQdh6O01"}],"identifier":"scientific-formats-predate-the-cloud","label":"Scientific formats predate the cloud","html_id":"scientific-formats-predate-the-cloud","implicit":true,"key":"XV1B0Ae1kr"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"There are exabytes of scientific data out in the wild, with more being generated every year. At Earthmover we believe the best place for it to reside is in the cloud, in object storage. Cloud platforms are the state-of-the-art for managing tabular business data, and scientific data teams deserve similarly powerful tools. The ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"AYgQbcwjWC"},{"type":"link","url":"https://pangeo.io/","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Pangeo project","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"YMXUz3vH08"}],"urlSource":"https://pangeo.io/","key":"ZfppHPPpeJ"},{"type":"text","value":" has shown how the cloud can work for ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"o3r0qkveWM"},{"type":"link","url":"https://earthmover.io/blog/tensors-vs-tables","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"array data","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"bMDxMHsbeu"}],"urlSource":"https://earthmover.io/blog/tensors-vs-tables","key":"IQiMe9Y9Cl"},{"type":"text","value":" too, enabling efficient storage of enormous scientific datasets, scalable data-proximate compute, and ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"R0S9qgzNI3"},{"type":"link","url":"https://medium.com/pangeo/step-by-step-guide-to-building-a-big-data-portal-e262af1c2977","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"sharing public data","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"FfZNObvlBU"}],"urlSource":"https://medium.com/pangeo/step-by-step-guide-to-building-a-big-data-portal-e262af1c2977","key":"TiwXR6kEqp"},{"type":"text","value":" far and wide.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"RZIGH7dFDc"}],"key":"nSNeYf7Vtf"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Unfortunately, most scientific array file formats (such as NetCDF, HDF5, TIFF, and GRIB) predate the cloud, so were never designed with access from cloud object storage in mind. We will demonstrate why naively moving netCDF files to the cloud results in deathly slow performance, and show you how Zarr, and other “cloud-optimized” data formats, solve this problem.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"X1qmOxVCPe"}],"key":"hy4JLmT7AQ"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"This post is for you if you’re responsible for managing an archive of scientific data and are curious about what a cloud migration would look like. It’s also for you if you’re just interested in learning more about how these formats work! If you’re not a developer or data engineer, you should still be able to follow along.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"C8hfwzRLj2"}],"key":"EclmD9mhuE"}],"key":"meUxBOczyJ"},{"type":"heading","depth":2,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Object storage is not a filesystem","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"alOIurQ8EX"}],"identifier":"object-storage-is-not-a-filesystem","label":"Object storage is not a filesystem","html_id":"object-storage-is-not-a-filesystem","implicit":true,"key":"h2L3puB01h"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Cloud object storage (such as Amazon S3) and filesystems (like the one on your laptop) are both data storage systems, but are crucially different. We need to understand those differences to see why cloud-optimizing data is important.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"zD4Ng7RC6g"}],"key":"JPbvkGF3c0"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Files are containers for data (each a series of bytes) that’s physically on your computer and managed by your Operating System. They are close at hand and fast to scan through. Imagine cooking in your own kitchen - you need to open the fridge to access ingredients (opening a file), it’s quick to look through what you have (fast to scan through the file), you need to put everything away and close the fridge door when you’re done (closing the file), and if someone else is blocking the fridge you have to wait until they are done (files are locked whilst another process edits them). This ingredient storage system is optimized for immediate use by one person at a time, to quickly examine a small number of close-at-hand items.","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"XDuWLRCJuz"}],"key":"F0BTtulqMH"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Object storage is similar in that each object is also a container for a series of bytes, but the way you access that data is different. There is no concept of “opening files”. Instead, all you can do is say “I would like to get this part of that object, please”, or “I would like to put some bytes into this location, please”. You interact with object storage only through these much simpler operations, such as GET, PUT, LIST, or DELETE, all sent over the network as HTTP requests.","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"DMM7tjJ440"}],"key":"yVNEHCsEza"},{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"Reading data from object storage is more like ordering ingredients directly from Costco. Instead of accessing ingredients directly, you submit specific orders (the GET requests). Each individual item takes time to deliver (called “latency”), but you can place many orders simultaneously, and the same distributor can fulfill orders for many customers at once. However, for this to work you need to know what is available and what you want to order in advance. This system is designed for scale rather than individual efficiency.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"Xa4cZ3kqVJ"}],"key":"WYzlCTwQHO"},{"type":"heading","depth":2,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Lousy latency","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"AIlqMKm6sA"}],"identifier":"lousy-latency","label":"Lousy latency","html_id":"lousy-latency","implicit":true,"key":"rMAyTc2zRP"},{"type":"paragraph","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"The most important difference for this post is the “latency”, the delay between asking for a piece of data and receiving the first few bytes of that data. (Or between placing your Costco order and receiving it).","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"OyuXwpwyVw"}],"key":"px7E8gx4oJ"},{"type":"paragraph","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"strong","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Latency with object storage is much higher than for a local filesystem.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"kZosz1opvx"}],"key":"vBiUxVRLvL"},{"type":"text","value":" When you read a piece of data from part of a file sitting on your laptop, moving the pointer to the correct location in the file to begin reading the first few bytes into RAM takes ~1 millisecond. But to get a piece of data from object storage using a GET request takes a ","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"RoLKdpqLfj"},{"type":"link","url":"https://blog.cloud-mercato.com/understand-object-storage-by-its-performance/","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"few 10’s of milliseconds","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"eK68O05rCp"}],"urlSource":"https://blog.cloud-mercato.com/understand-object-storage-by-its-performance/","key":"MugU9VJRLg"},{"type":"text","value":" from the moment you send the request over the network to the moment you receive the first byte back. ","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"LCqgqaFr67"},{"type":"emphasis","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Spoiler: this will be a problem.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"QmuyVJzUJn"}],"key":"A00AiPlgvw"}],"key":"yqfAidOPqO"},{"type":"heading","depth":2,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"Describe yourself in 8 bytes","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"tHybd3Dh8w"}],"identifier":"describe-yourself-in-8-bytes","label":"Describe yourself in 8 bytes","html_id":"describe-yourself-in-8-bytes","implicit":true,"key":"s6ngmCwavM"},{"type":"paragraph","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"Formats like netCDF are amazing because they are self-describing. The information required to understand the data in the file (known as the metadata) is present in the file itself, so you can simply read that one netCDF file to learn that it contains, for example, two arrays named “temperature” and “precipitation”, each of which is arranged as a 100x100x10 grid of 32-bit float values. Without this metadata you would either have had to know a priori what was in there, or just guess what it meant. Self-describing data formats were a major step forward for reproducible science and sanity in general.","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"lXhJ2tjJH3"}],"key":"CBl35Yiy63"},{"type":"paragraph","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"text","value":"But formats like netCDF/HDF5 are commonly sub-optimal for object storage because the descriptions of the contents are spread throughout the file. The tiny part that tells you that the first array is called “temperature” and the other tiny part that tells you that the second array is called “precipitation” are not adjacent; they are separated from one another by all of the thousands of actual temperature numeric data values. That means to find out a few kBs of information (all the metadata), you may have to comb through the entire file, which could be MBs or even GBs in size. Imagine if you had to walk through the entire Costco store just to find out what departments they have.","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"ZxvpQtRt5o"}],"key":"w95EniqM9h"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/build/hdf5-layout-545e2d962422497360197b7e6452b40a.png","alt":"diagram of the layout of metadata and chunks within a HDF file","key":"vCbJZgOHBS","urlSource":"images/hdf5-layout.png"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"A schematic of the layout of metadata within non-cloud-optimized HDF5/netCDF4 files. The metadata is scattered throughout the whole file, separated by large distances by the raw data chunks. From ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"hymjd7KHqF"},{"type":"link","url":"https://guide.cloudnativegeo.org/cloud-optimized-netcdf4-hdf5/#why-accessing-hdf5-on-the-cloud-is-slow","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"Barrett et. al. 2024","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"TBEVB6PEcs"}],"urlSource":"https://guide.cloudnativegeo.org/cloud-optimized-netcdf4-hdf5/#why-accessing-hdf5-on-the-cloud-is-slow","key":"mCWbXaFhgO"},{"type":"text","value":".","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"IfAzc0vlOD"}],"key":"ryxVO96bLF"}],"key":"lAN5VfyuZt"}],"enumerator":"1","key":"kDL7QhIWK7"},{"type":"heading","depth":2,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"Death by a thousand GETs","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"b65uX3p5YP"}],"identifier":"death-by-a-thousand-gets","label":"Death by a thousand GETs","html_id":"death-by-a-thousand-gets","implicit":true,"key":"WdUmyCVufX"},{"type":"paragraph","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"Presented with a URL pointing to a mystery file sitting in object storage, you must begin by issuing one GET request for the first few bytes (called the ","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"caWteTHaLV"},{"type":"link","url":"https://en.wikipedia.org/wiki/List_of_file_signatures","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"“magic” bytes","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"scTPUJDxs7"}],"urlSource":"https://en.wikipedia.org/wiki/List_of_file_signatures","data":{"page":"List_of_file_signatures","wiki":"https://en.wikipedia.org/","lang":"en"},"internal":false,"protocol":"wiki","key":"TZAOVHsHNA"},{"type":"text","value":"), and wait for that to come back to learn that this is, in fact, a netCDF file. Then you can issue another GET request for some other set of bytes to learn that this file contains an array called “temperature” of size 1GB. Only once that comes back do you know how many bytes to jump forward for another GET request to learn that the next array is called “precipitation”.","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"UcyRAEIYiC"}],"key":"zsp0S30T22"},{"type":"paragraph","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"This is not a problem for a local filesystem. Your pointer starts at the start of the file, and using the filesystem’s seek operation to move it to a new location is very speedy (~0.1 milliseconds on an SSD), so scanning through the entire file by moving the pointer forwards lots of times in a row is no big deal.","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"QcMSsP58mM"}],"key":"xKTpNRlE3p"},{"type":"paragraph","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"But to read a lone netCDF file in object storage you have to issue many GET requests, one after another, each of which adds another round-trip’s worth of latency. As we learned above, latency for object storage is very high, so this rapidly adds up.","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"ZyKosIeEKc"}],"key":"CvxwN7eDqf"},{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"Let’s demonstrate. ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"Wg5eiT0qxN"},{"type":"link","url":"https://gist.github.com/TomNicholas/1973624099b207a0550f66ed20cabc37","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"This demo","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"xoDZDiXAZM"}],"urlSource":"https://gist.github.com/TomNicholas/1973624099b207a0550f66ed20cabc37","key":"B3hBR2L6XL"},{"type":"text","value":" shows what happens when you naively try to open a 1GB (3GB uncompressed) netCDF file in a public S3 bucket using Xarray, and print all the metadata you might care about (e.g. array names and sizes), by reading it as if it were a local file. Each filesystem read call is translated into one HTTP GET request, with no special treatment like caching or pre-fetching.","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"JKMj0bSWYq"}],"key":"zt4EMSiFH1"},{"type":"paragraph","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"As expected, the performance is atrocious - it takes the better part of a minute just to read the metadata, making 502 separate GET requests just to download a grand total of 267KB. That’s an effective bandwidth of only 7 KB/s, far slower than even 1990’s-era dial-up internet.","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"Wsp5jRXXr8"}],"key":"UVViNmGmIG"},{"type":"paragraph","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"text","value":"(Note there are many ways this could be optimized, such as by caching, pre-fetching, or ","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"RF6UlW59Ob"},{"type":"link","url":"https://discourse.pangeo.io/t/pangeo-showcase-hdf5-at-the-speed-of-zarr/","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"text","value":"repacking","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"b9pvmnOJJj"}],"urlSource":"https://discourse.pangeo.io/t/pangeo-showcase-hdf5-at-the-speed-of-zarr/","key":"JOg5O9CR0r"},{"type":"text","value":" metadata. Even using the ","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"xzWkaIzqtW"},{"type":"inlineCode","value":"netCDF4-python","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"ldqxSWblUk"},{"type":"text","value":" library out-of-the-box would perform somewhat better. But the point is that if you do not or cannot alter the files, and you naively treat object storage as if it’s a local filesystem, you will get abysmal performance.)","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"av7de6dcL1"}],"key":"p874RRThnq"},{"type":"paragraph","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"text","value":"You could instead ask to download the entire file up front, which means downloading all the data when you really only wanted to see the metadata to know what’s inside. But then you are downloading millions or billions of times more data than you know you will need.","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"GgLrt4L9qI"}],"key":"q7wZgsdeEy"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/build/qui-downloads-300dpi-bb1550ec218e5ff152371dcb33fc980d.png","alt":"cartoon of a old man saying to a child \"When I was a lad, we had to download all the data before we could look at it!\"","key":"ZyJeCcGXky","urlSource":"images/qui-downloads-300dpi.png"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"link","url":"https://github.com/zarr-developers/zarr-illustrations-falk-2022?tab=readme-ov-file#qui-downloads","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"text","value":"Zarr cartoon","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"tC0oSkLcny"}],"urlSource":"https://github.com/zarr-developers/zarr-illustrations-falk-2022?tab=readme-ov-file#qui-downloads","error":true,"key":"lCEVsAl47k"},{"type":"text","value":" about how having to download all the data before looking at any of it is an antiquated paradigm.","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"yjo8Cf7Os9"}],"key":"Mv4fC7nGgY"}],"key":"CEBdkojWdZ"}],"enumerator":"2","key":"eAoSIqaFOP"},{"type":"paragraph","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"Even worse - this is all for one file. Most datasets of interest consist of thousands of netCDF files, making these problems a thousand times worse! It can potentially take hours just to open such a dataset on the cloud. This sucks, and is ultimately all a consequence of the data not being “cloud-optimized”.","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"nUWe6uCNC7"}],"key":"dzjhcpThEw"},{"type":"heading","depth":2,"position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"text","value":"A series of fat pipes","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"zTN8X6JDjZ"}],"identifier":"a-series-of-fat-pipes","label":"A series of fat pipes","html_id":"a-series-of-fat-pipes","implicit":true,"key":"cfbo7eH9nm"},{"type":"paragraph","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"text","value":"At this point you are probably wondering, “if the latency of the cloud is so high then what is so good about it?” The answer is that what object storage lacks in latency it more than makes up for in throughput.","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"AXC99MOhMV"}],"key":"L5e4fGWIQw"},{"type":"paragraph","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"If the internet is famously ","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"nekBcmj0vq"},{"type":"link","url":"https://en.wikipedia.org/wiki/Series_of_tubes","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"“a series of tubes”","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"EIQuD7EzJR"}],"urlSource":"https://en.wikipedia.org/wiki/Series_of_tubes","data":{"page":"Series_of_tubes","wiki":"https://en.wikipedia.org/","lang":"en"},"internal":false,"protocol":"wiki","key":"CGBGgmeT2j"},{"type":"text","value":", then the cloud is a series of fat pipes. Inside a data center, the object storage is connected to the compute resources via connections of enormous bandwidth. Whilst it might take a moment between you asking for the tap to be turned on and water starting to flow, once it begins you will quickly be drenched by a massive firehose of data coming through that fat pipe.","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"r0JP1OjxC9"}],"key":"h4kjZlPJQh"},{"type":"paragraph","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"text","value":"The total amount of data transferred divided by the total time it took to transfer it is called throughput. The throughput of object storage can be through the roof - the ","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"oB0sdmz1A3"},{"type":"link","url":"https://shivaram.org/publications/pywren-socc17.pdf","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"text","value":"PyWren paper","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"vowxzZmgA2"}],"urlSource":"https://shivaram.org/publications/pywren-socc17.pdf","key":"iqqOVUROT1"},{"type":"text","value":" demonstrated linear scaling to aggregate read throughputs of 80GB/s on S3, with no signs of slowing at even larger scales. This kind of performance is comparable to that of the expensive filesystems of ","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"QVz3eFtMh2"},{"type":"link","url":"https://www.olcf.ornl.gov/wp-content/uploads/2-15-23-Frontier-System-Architecture-public-v7.pdf","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"text","value":"top supercomputers","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"UWszlG9KPC"}],"urlSource":"https://www.olcf.ornl.gov/wp-content/uploads/2-15-23-Frontier-System-Architecture-public-v7.pdf","key":"tZ6RsiYI9F"},{"type":"text","value":", but on far cheaper commodity hardware instead of specialized HPC hardware, and available to anyone.","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"zfbABcuySC"}],"key":"VWZwQC8YlE"},{"type":"paragraph","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"text","value":"How do we achieve this massive throughput? The problem we saw with the metadata is not that we’re doing a lot of GET operations – the cloud is actually great at that – it’s rather that we’re doing all those GETs sequentially, one after the other. If we only needed to issue one GET request we would only have to wait once, and if we were able to somehow immediately issue all the GET requests we were ever going to need, the power of object storage is that it can send all the results back to us simultaneously, thereby taking full advantage of the fat pipe. (In the Costco analogy, you could submit an order for a literal truckload of apples.)","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"C5ccXgdQ2y"}],"key":"q5HeM5KsgZ"},{"type":"heading","depth":2,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"text","value":"Idea: Separate the metadata","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"K83vjZW9Ol"}],"identifier":"idea-separate-the-metadata","label":"Idea: Separate the metadata","html_id":"idea-separate-the-metadata","implicit":true,"key":"xGxmUUYHKu"},{"type":"paragraph","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"So to benefit from object storage, traditional netCDF isn’t going to work - we have to change something. The first problem to solve is needing to do all those sequential GETs just to retrieve a very small amount of metadata.","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"wfzwbP2Ih2"}],"key":"UUd0F7uRKc"},{"type":"paragraph","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"If that metadata were instead separated out into a known location (for example, a separate accompanying “sidecar” file), we could simply issue one GET request for the entire contents of that small metadata file. Then we would know everything about the structure of the rest of the data after just one round trip’s worth of latency, which is the fastest we could possibly have learnt about anything in object storage. (Costco now has a catalog.)","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"i9mLlLU09H"}],"key":"yX5eWiwtA6"},{"type":"paragraph","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"text","value":"Separating the metadata from the data is also what allows scalability - more data no longer implies searching for longer to find the metadata, as it’s always separated into a known location.","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"JHNPqQw84P"}],"key":"kwABdoI5zt"},{"type":"heading","depth":2,"position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"Idea: Split the data into chunks","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"gyJvldV9Vf"}],"identifier":"idea-split-the-data-into-chunks","label":"Idea: Split the data into chunks","html_id":"idea-split-the-data-into-chunks","implicit":true,"key":"vwmUmiFBXr"},{"type":"paragraph","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"Once we know what’s in the dataset, the other problem is how to get only the parts of the data we actually want, while taking advantage of the massive throughput object storage offers.","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"Fryz1hEsqN"}],"key":"Q5ZucSccYz"},{"type":"paragraph","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"strong","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"If we split each data array into many small chunks, then we can download only the subset of data we actually want to use.","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"ea5azFmgsr"}],"key":"xZtNlBs1gH"},{"type":"text","value":" For example, all chunks that make up the most recent satellite image of a certain location. If each chunk is a separate file, then we can easily request them independently and in parallel, potentially all at once through our fat pipe.","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"aJXCHmVx5e"}],"key":"LgSYVW9k7P"},{"type":"paragraph","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"(If you’re really paying attention you might ask: “If small is good why don’t we just make the chunks as small as possible?” One reason is that we also want to compress each chunk to save storage space. There is a trade-off between larger chunks, which compress more efficiently, and smaller chunks, which allow you to make more targeted requests.)","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"GgSJNBz37s"}],"key":"KxlHDeCriQ"},{"type":"paragraph","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"text","value":"NetCDF and HDF5 ","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"l9ZRU39khb"},{"type":"link","url":"https://www.unidata.ucar.edu/software/netcdf/workshops/2011/nc4chunking/WhatIsChunking.html","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"text","value":"already use chunking internally within their file formats","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"OnnSw7V2yD"}],"urlSource":"https://www.unidata.ucar.edu/software/netcdf/workshops/2011/nc4chunking/WhatIsChunking.html","key":"ojzM4QLZEy"},{"type":"text","value":". However, the information about the chunks (another form of metadata) is relatively slow to access on object storage, for the reasons described above, meaning that it isn’t trivial to just grab the chunks we want. You also need to split the chunks out if you want to partially update an existing dataset in the cloud, because object storage doesn’t allow you to edit files, only replace them in their entirety.","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"kkuLVZeDKV"}],"key":"RkJyfmwALx"},{"type":"heading","depth":2,"position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"children":[{"type":"text","value":"Congratulations! That’s Zarr.","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"eHAr3NwQgq"}],"identifier":"congratulations-thats-zarr","label":"Congratulations! That’s Zarr.","html_id":"congratulations-thats-zarr","implicit":true,"key":"QUy1ehda6T"},{"type":"paragraph","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"So let’s invent a new file format designed to work beautifully with object storage, with separate files for the metadata and splitting the data into chunks. Oh wait - that already exists: it’s called Zarr.","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"FNM3ZLnVRU"}],"key":"kFHFLoqkLC"},{"type":"paragraph","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"text","value":"This isn’t facetious - Zarr really is faster because of these two main reasons. In fact, you can clearly see it in this diagram of the internal structure of an example Zarr store.","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"key":"Bm6RjGPIVM"}],"key":"xqhJLxfe8B"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/build/zarr-layout-26ba2c05dc596ac7eb88fe501dfd2055.png","alt":"diagram of the internal layout of a Zarr v3 store","key":"cadUNrXgN2","urlSource":"images/zarr-layout.png"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"children":[{"type":"text","value":"Diagram of the structure of a Zarr v3 store, showing how the metadata is separated into dedicated files, and the data is split into chunks.","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"ghXVN1H4qy"}],"key":"qy6yFYPGWT"}],"key":"YVta7MvnaK"}],"enumerator":"3","key":"Q90CRMRGmJ"},{"type":"paragraph","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"text","value":"All the metadata for a particular array are in one ","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"TY1KwoYWCq"},{"type":"inlineCode","value":"zarr.json","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"EnpuSb64yf"},{"type":"text","value":" file, which can be retrieved with a single GET request. The actual data arrays are split into grids of chunk files, any set of which can be retrieved simultaneously using one GET request per chunk.","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"yw3kOU0btS"}],"key":"J8xYvsoihm"},{"type":"paragraph","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"Back in 2018, there were ","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"Z8FqDRPJFo"},{"type":"link","url":"https://matthewrocklin.com/blog/work/2018/02/06/hdf-in-the-cloud","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"various ideas","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"oXXML4rdSu"}],"urlSource":"https://matthewrocklin.com/blog/work/2018/02/06/hdf-in-the-cloud","key":"ggsztw83lC"},{"type":"text","value":" for overcoming cloud latency, but it’s cloud-optimized formats such as Zarr, ","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"JNBbdkHzsj"},{"type":"link","url":"https://cogeo.org/","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"Cloud-Optimized GeoTIFF","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"IHRqJjeYKl"}],"urlSource":"https://cogeo.org/","key":"dYPbkDIqbB"},{"type":"text","value":" (a.k.a. COG), and even ","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"B0RpCjdfEi"},{"type":"link","url":"https://ntrs.nasa.gov/api/citations/20240008354/downloads/Cloud_Optimized.pdf","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"cloud-optimized HDF5","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"nxpd3UWAs7"}],"urlSource":"https://ntrs.nasa.gov/api/citations/20240008354/downloads/Cloud_Optimized.pdf","key":"oLv0OUybgU"},{"type":"text","value":" that have taken off within climate, weather, microscopy, and other scientific data communities.","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"FaeWWeCfeM"}],"key":"mGZvJSuO6c"},{"type":"paragraph","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"text","value":"Note that none of these ideas were invented by Zarr. Commercial cloud object storage is almost 20 years old(!) and cloud-optimized tabular formats such as Avro and Parquet were developed to take full advantage soon afterwards. (Parquet was a direct inspiration for Zarr.) To understand why we can’t just use tabular formats for scientific data read our recent ","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"iz2vwNV9Z4"},{"type":"link","url":"https://earthmover.io/blog/tensors-vs-tables","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"text","value":"fundamentals post on tensors vs tables","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"OWICzcLg6X"}],"urlSource":"https://earthmover.io/blog/tensors-vs-tables","key":"iijWD5c5TI"},{"type":"text","value":".","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"ikA4E0cb0n"}],"key":"pVeF5myq0d"},{"type":"heading","depth":2,"position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"text","value":"Consolidating ~~power~~ metadata","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"wbPUWX6T1R"}],"identifier":"consolidating-power-metadata","label":"Consolidating ~~power~~ metadata","html_id":"consolidating-power-metadata","implicit":true,"key":"ZbWfpn9RmM"},{"type":"paragraph","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"children":[{"type":"text","value":"However, this still isn’t perfect. Zarr’s native format on object storage stores metadata for each array in a dedicated file, i.e. it has one ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"GZL5wFL52G"},{"type":"inlineCode","value":"zarr.json","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"brCP2T0qdd"},{"type":"text","value":" file to go get per array. Some datasets have hundreds of different arrays, so it would be considerably more efficient still if all the metadata for all the arrays were somehow in one json file.","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"xIYeCDqkWu"}],"key":"I2oHFweuNb"},{"type":"paragraph","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"text","value":"That’s what Zarr’s “consolidated metadata” feature is: one weird trick to minimize the number of GET requests, by consolidating all the metadata into one ","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"bnywNCVj23"},{"type":"inlineCode","value":"zarr.json","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"lftrxtR8vg"},{"type":"text","value":" file at the root of the Zarr store. Consolidated metadata is arguably a bit of a hack, but because Xarray actually writes this by default, many existing Zarr stores have it already.","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"FCJNudFjBI"}],"key":"DUHgSySKqm"},{"type":"heading","depth":2,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"text","value":"Icechunk: Consolidated metadata + version control","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"HaQHOGktHP"}],"identifier":"icechunk-consolidated-metadata-version-control","label":"Icechunk: Consolidated metadata + version control","html_id":"icechunk-consolidated-metadata-version-control","implicit":true,"key":"iad6nYOAFm"},{"type":"paragraph","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"Earthmover’s open-source format ","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"K0DJxUVoe9"},{"type":"link","url":"https://icechunk.io/","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"Icechunk","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"u6Dqn0ACwR"}],"urlSource":"https://icechunk.io/","key":"aj4VQdvAbf"},{"type":"text","value":" takes consolidated metadata and runs with it. Like a conventional Zarr store, Icechunk also stores all the metadata and chunks as separate objects, but Icechunk also has a system for tracking version history of all those objects, providing git-like version-control features for your data. You can think of it as tracking successive versions of consolidated metadata, each of which describes the state of your entire Zarr store at one point in its history. For more details, read the ","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"eetiPtHcPt"},{"type":"link","url":"https://earthmover.io/blog/icechunk","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"Icechunk launch blog post","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"jnDiOqgABN"}],"urlSource":"https://earthmover.io/blog/icechunk","key":"bCqMSJEqLw"},{"type":"text","value":", or watch the ","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"dY4nVCsjGe"},{"type":"link","url":"https://youtu.be/idrdJ0kAOQU?si=-pUbdRSj2Acb3z86","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"webinar on version control with icechunk","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"v0dky0VyrX"}],"urlSource":"https://youtu.be/idrdJ0kAOQU?si=-pUbdRSj2Acb3z86","key":"vM5goDgZRv"},{"type":"text","value":".","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"Weuh7Nmabo"}],"key":"f2C18CcBDu"},{"type":"paragraph","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"text","value":"As the metadata is always consolidated, Icechunk also minimizes the number of GET requests required to open the dataset. We ran a simple benchmark to confirm this.","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"NvJx5j87yF"}],"key":"dJLwN0E6ZQ"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/build/opening_comparison-2f940958a8b752bb11ae137fe6b8e77a.png","alt":"bar chart showing time taken and number of HTTP GET requests required to use xarray to open a netCDF4 file, Zarr store, and Icechunk store","key":"cpIWvn4ueM","urlSource":"images/opening_comparison.png"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"Benchmarking results for calling ","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"PtNJeeUn6X"},{"type":"inlineCode","value":"xarray.open_dataset","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"kwDRutAQaL"},{"type":"text","value":" on a single file (1GB compressed, 3GB uncompressed) of ","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"sT9ubJ6qp7"},{"type":"link","url":"https://registry.opendata.aws/noaa-oar-arl-nacc-pds/","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"NOAA GFS data","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"nzHK42mngB"}],"urlSource":"https://registry.opendata.aws/noaa-oar-arl-nacc-pds/","key":"OdOpvQJtv3"},{"type":"text","value":", stored in different formats. Code was run from a laptop in New York, so the time reflects latency to reach the data in AWS ","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"ycYOhjeEIf"},{"type":"inlineCode","value":"us-east-1","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"KPPiCEhd6y"},{"type":"text","value":". Code to reproduce the results is ","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"IlWUmdeEb0"},{"type":"link","url":"https://gist.github.com/TomNicholas/1973624099b207a0550f66ed20cabc37","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"available on Github","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"jkdmCm11F2"}],"urlSource":"https://gist.github.com/TomNicholas/1973624099b207a0550f66ed20cabc37","key":"TIdlepxIzh"},{"type":"text","value":".","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"xMAbNPurwb"}],"key":"U4ayU95hIl"}],"key":"YSmlvLKYmx"}],"enumerator":"4","key":"soiCSYQEn1"},{"type":"paragraph","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"children":[{"type":"text","value":"Our benchmark compares the number of HTTP requests issued, and the overall time taken to call ","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"gJJVxtlj76"},{"type":"inlineCode","value":"xarray.open_dataset","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"FSU0ivOWfY"},{"type":"text","value":" on 1GB’s worth of array data stored in S3. It includes the netCDF demo from earlier, compared against the same data stored as native Zarr, Zarr with consolidated metadata, and as icechunk.","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"WlezhIXkNR"}],"key":"C5bVI57Svx"},{"type":"paragraph","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"text","value":"While Zarr with consolidated metadata minimizes the number of HTTP GET requests required overall, ","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"MAJkIr8Fvb"},{"type":"strong","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"text","value":"Icechunk has similar speed advantages, and all the power of transactions and version control!","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"DkXpOViDIn"}],"key":"vOeEDUYGJf"}],"key":"fOp5t2kys0"},{"type":"paragraph","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"text","value":"(For the more technical amongst you see the footnotes about this benchmark at the end of the article.)","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"v9wEDVt84Y"}],"key":"XF2w52Gmhx"},{"type":"heading","depth":2,"position":{"start":{"line":154,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"text","value":"High throughput means low cost","position":{"start":{"line":154,"column":1},"end":{"line":154,"column":1}},"key":"vXWToy4oZ5"}],"identifier":"high-throughput-means-low-cost","label":"High throughput means low cost","html_id":"high-throughput-means-low-cost","implicit":true,"key":"RCPVFTqBtS"},{"type":"paragraph","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"children":[{"type":"text","value":"That’s latency. For throughput, thanks to optimizations in ","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"key":"p1gXLBktkl"},{"type":"link","url":"https://earthmover.io/blog/zarr3-release","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"children":[{"type":"text","value":"Zarr-Python 3","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"key":"XcMANSbbdr"}],"urlSource":"https://earthmover.io/blog/zarr3-release","key":"T0KNBp9VJL"},{"type":"text","value":" and ","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"key":"fNtFZrvPci"},{"type":"link","url":"https://earthmover.io/blog/icechunk#:~:text=new%20async%20API.-,performance,-At%20this%20stage","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"children":[{"type":"text","value":"Icechunk","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"key":"VB4TXKOPO7"}],"urlSource":"https://earthmover.io/blog/icechunk#:~:text=new%20async%20API.-,performance,-At%20this%20stage","key":"sGLKedWk2i"},{"type":"text","value":", our open-source software stack is now approaching the ","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"key":"QnTdb3awbi"},{"type":"link","url":"https://earthmover.io/blog/icechunk#:~:text=new%20async%20API.-,performance,-At%20this%20stage","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"children":[{"type":"text","value":"theoretical limits","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"key":"OqF5z114QH"}],"urlSource":"https://earthmover.io/blog/icechunk#:~:text=new%20async%20API.-,performance,-At%20this%20stage","key":"rRNYFd3Vr2"},{"type":"text","value":" of maximum possible throughput. So when streaming data from object storage to cloud compute within the same datacentre, you can use the full bandwidth of those fat pipes.","position":{"start":{"line":156,"column":1},"end":{"line":156,"column":1}},"key":"lKtR9ymQtf"}],"key":"qFglJ6Zi28"},{"type":"paragraph","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"children":[{"type":"text","value":"This translates to big cost savings. Multi-dimensional data analysis workloads are often IO-bound, meaning that the CPUs you’re paying for spend most of their time waiting for data to come in, not actually computing on it. So the ","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"key":"uW5Rog0OnJ"},{"type":"link","url":"https://earthmover.io/blog/nasa-icechunk#:~:text=In%20the%20benchmark%20shown%20below%2C%20we%20were%20able%20to%20extract%20a%20month%2Dlong%20time%20series%20from%20GPM%20IMERG%20data%20stored%20in%20S3%20in%20just%203%20seconds.%20In%20comparison%2C%20the%20previous%20cloud%2Dbased%20approach%20takes%205%20minutes!","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"children":[{"type":"text","value":"100x speedup","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"key":"RDZAqhsmkJ"}],"urlSource":"https://earthmover.io/blog/nasa-icechunk#:~:text=In%20the%20benchmark%20shown%20below%2C%20we%20were%20able%20to%20extract%20a%20month%2Dlong%20time%20series%20from%20GPM%20IMERG%20data%20stored%20in%20S3%20in%20just%203%20seconds.%20In%20comparison%2C%20the%20previous%20cloud%2Dbased%20approach%20takes%205%20minutes!","key":"w5VKCmexR6"},{"type":"text","value":" we see for NASA data using Zarr and Icechunk compared to using non-cloud-optimized netCDF translates to 100x less time you’re paying for CPUs to sit around, and so 100x lower cloud computing bills!","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"key":"hTNq6Kg3Ur"}],"key":"MUTYS4F2VH"},{"type":"heading","depth":2,"position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"children":[{"type":"text","value":"No free lunch","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"key":"b3EGqdyX2z"}],"identifier":"no-free-lunch","label":"No free lunch","html_id":"no-free-lunch","implicit":true,"key":"tAz6FvYsh4"},{"type":"paragraph","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"text","value":"Whilst using cloud-optimized data in the cloud is generally a no-brainer, there are some downsides to the cloud approach.","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"eZtARsioAv"}],"key":"EFwzTZdrCJ"},{"type":"paragraph","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"text","value":"Object storage always has high time-to-first-byte. If reacting to new data as fast as physically possible really matters to you (e.g., because you’re doing high-frequency trading), then you should not use object storage at all. High-frequency trading is an example of a ","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"b6BY5orTpT"},{"type":"link","url":"https://aws.amazon.com/compare/the-difference-between-olap-and-oltp/","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"text","value":"“transactional” workload","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"Yrl0ugOMWz"}],"urlSource":"https://aws.amazon.com/compare/the-difference-between-olap-and-oltp/","key":"mikq73vv2S"},{"type":"text","value":" because the objective is to make a decision and write a small amount of information back as fast as possible (to make the trade). Object storage is better suited for “analytical” workloads, in which a larger amount of data is ingested for important but not subsecond-urgent querying. These analytical workloads are plenty common within scientific and geospatial domains.","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"hg5APxILHl"}],"key":"kmq8tCN6nW"},{"type":"paragraph","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"text","value":"Using a new file format generally requires copying the original data. That requires both more storage space to hold the copy as well as compute to perform the copying. But what if we didn’t have to copy all the data? Look out for a future blog post about “Virtual Zarr”...","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"NO1BEOWLKX"}],"key":"X9Gj0JvAEV"},{"type":"heading","depth":2,"position":{"start":{"line":168,"column":1},"end":{"line":168,"column":1}},"children":[{"type":"text","value":"Towards the great scientific supercomputer in the sky","position":{"start":{"line":168,"column":1},"end":{"line":168,"column":1}},"key":"pagv1hoMPe"}],"identifier":"towards-the-great-scientific-supercomputer-in-the-sky","label":"Towards the great scientific supercomputer in the sky","html_id":"towards-the-great-scientific-supercomputer-in-the-sky","implicit":true,"key":"F1O2mvaj4d"},{"type":"paragraph","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"text","value":"Hopefully now next time you hear “cloud-optimized data” you will understand that it’s really just about separating the metadata from the chunks, and fetching things efficiently.","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"BntL7PbeFN"}],"key":"vf3B0s9sgU"},{"type":"paragraph","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"children":[{"type":"text","value":"But our vision for working with scientific data in the cloud requires more than just cloud-optimizing files and dumping them into cloud buckets. Ideally we want to forget about files entirely and just live in a world of seamless cloud data lakes. But that will have to wait until next time!","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"key":"sCJYl3bFzx"}],"key":"TjgvXM3WfI"},{"type":"heading","depth":3,"position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"children":[{"type":"text","value":"Footnotes:","position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"key":"d5Hm6bcRPY"}],"identifier":"footnotes","label":"Footnotes:","html_id":"footnotes","implicit":true,"key":"U1pZK7VbDu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":176,"column":1},"end":{"line":180,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"text","value":"When ","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"NOyeZXUft5"},{"type":"link","url":"https://github.com/pydata/xarray/pull/1528","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"text","value":"Ryan and Joe first integrated Zarr with Xarray in 2017","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"ZhidHkq6nu"}],"urlSource":"https://github.com/pydata/xarray/pull/1528","data":{"kind":"issue","org":"pydata","repo":"xarray","issue_number":"1528"},"internal":false,"protocol":"github","key":"ExMENH1cmf"},{"type":"text","value":", it wasn’t even possible to open netCDF in the cloud directly without downloading the entire file.","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"WLlzFFgNvS"}],"key":"am5S0rVveo"},{"type":"listItem","spread":true,"position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"text","value":"Recent improvements to opening netCDF directly, such as ","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"Sk7ezmJvMH"},{"type":"link","url":"https://guide.cloudnativegeo.org/cloud-optimized-netcdf4-hdf5/","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"text","value":"“cloud-optimized HDF5”","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"mxyubUmj7G"}],"urlSource":"https://guide.cloudnativegeo.org/cloud-optimized-netcdf4-hdf5/","key":"hGbCzuEHmJ"},{"type":"text","value":", are using these same ideas, and so are formats such as COG and Parquet.","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"Yh7OdzD0mi"}],"key":"R296b0l60i"},{"type":"listItem","spread":true,"position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"children":[{"type":"text","value":"Zarr’s performance on this chart used to be a lot worse - big ","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"yFzWS8EzM9"},{"type":"link","url":"https://earthmover.io/blog/xarray-open-zarr-improvements","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"children":[{"type":"text","value":"improvements","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"BQEEAMSNMz"}],"urlSource":"https://earthmover.io/blog/xarray-open-zarr-improvements","key":"XzgKKzkH7L"},{"type":"text","value":" were made to the Zarr-Python library by the open-source community.","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"DHLeKpHo27"}],"key":"kWMzfkEx23"},{"type":"listItem","spread":true,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"text","value":"The reason the number of requests and total time don’t just scale in lockstep is because if you issue a lot of requests all at once it only takes one round-trip’s worth of latency to get them all back. That’s basically what Zarr without consolidated metadata is doing.","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"I3GlJe1Hol"}],"key":"kUr6QapRq6"},{"type":"listItem","spread":true,"position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"children":[{"type":"text","value":"For a larger subset of GFS containing more files, netCDF would take even longer as the metadata of every file would need to be read, while Zarr and Icechunk would require approximately the same amount of time. So Zarr \u0026 Icechunk are the only options here that can scale to accessing truly massive datasets.","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"Kx765tTx5d"}],"key":"lcrN0vmpw8"}],"key":"kCuZKhkg2i"}],"key":"nWYIYbVZ2f"}],"key":"DTP8TJPVZS"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Blog","url":"/blog","group":"Welcome"},"next":{"title":"Science needs a social network for sharing big data","url":"/blog/2025/science-needs-a-social-network","group":"2025"}}},"domain":"http://localhost:3000"},"project":{"abbreviations":{"LF":"The Linux Foundation","JF":"The Jupyter Foundation","JEC":"Jupyter Executive Council","JFB":"The Jupyter Foundation Board","SSC":"Software Steering Council","OSPO":"Open Source Program Office"},"title":"Welcome","thumbnail":"/build/profile-color-circle-ce3d4b6b03511453d680d13ef02e6d5e.png","authors":[{"id":"tom","nameParsed":{"literal":"Tom Nicholas","given":"Tom","family":"Nicholas"},"name":"Tom Nicholas","orcid":"0000-0002-2176-0530","github":"TomNicholas","url":"https://tom-nicholas.com"}],"github":"https://github.com/TomNicholas/tomnicholas.github.io","references":{"ttw":{"url":"https://book.the-turing-way.org"}},"toc":[{"file":"index.md"},{"file":"about.md"},{"children":[{"children":[{"pattern":"blog/2025/**{.ipynb,.md}"}],"title":"2025"},{"children":[{"pattern":"blog/2024/**{.ipynb,.md}"}],"title":"2024"},{"children":[{"pattern":"blog/2023/**{.ipynb,.md}"}],"title":"2023"},{"children":[{"pattern":"blog/2022/**{.ipynb,.md}"}],"title":"2022"},{"children":[{"pattern":"blog/2020/**{.ipynb,.md}"}],"title":"2020"},{"children":[{"pattern":"blog/2019/**{.ipynb,.md}"}],"title":"2019"}],"file":"blog.md"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"about","title":"About me","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"blog","title":"Blog","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"level":2,"title":"2025"},{"slug":"blog.2025.cloud-optimized-scientific-data","title":"Fundamentals: What is Cloud-Optimized Scientific Data?","description":"The article I wish I could have read back when I first heard of Zarr in 2018. Explains how object storage and conventional filesystems are different, and the key properties that make Zarr work so well in cloud object storage.\n","date":"2025-04-17","thumbnail":"/build/hdf5-layout-545e2d962422497360197b7e6452b40a.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["cloud","zarr","netcdf","earthmover","open-science"],"level":3},{"slug":"blog.2025.science-needs-a-social-network","title":"Science needs a social network for sharing big data","description":"Imagine being able to visit one website, search for any scientific dataset from any institution in the world, preview it, then stream the data out at high speed, in the format you prefer. We have the technology - here's what we should build.\n","date":"2025-01-18","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["open-science","frost"],"level":3},{"level":2,"title":"2024"},{"slug":"blog.2024.datatree","title":"Xarray x NASA: xarray.DataTree for hierarchical data structures","description":"How xarray's new DataTree feature came about, and thoughts on how public agencies can support the open-source scientific software that they depend on.\n","date":"2024-12-19","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science"],"level":3},{"level":2,"title":"2023"},{"slug":"blog.2023.cubed-xarray","title":"Cubed: Bounded-memory serverless array processing in xarray","description":"Cubed was designed to address the main problems with Dask, so I integrated it with Xarray. \n","date":"2023-06-01","thumbnail":"/build/e35ec725ea00fd2a6250d35dd849930e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","dask","cubed","open-science"],"level":3},{"slug":"blog.2023.dask-distributed","title":"Dask.distributed and Pangeo: Better performance for everyone thanks to science / software collaboration","description":"Dask's distributed scheduler algorithm got a major fix after we tested its' limits on a huge oceanography analysis problem.\n","date":"2023-01-04","thumbnail":"/build/f8821db67c2a5f1f07b570e6bed342cc.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","dask","open-science"],"level":3},{"level":2,"title":"2022"},{"slug":"blog.2022.easy-ipcc-datatree","title":"Easy IPCC part 1: Multi-Model Datatree","description":"Analysing CMPI6 data as a motivation for xarray DataTree.\n","date":"2022-08-29","thumbnail":"/build/d1061528b3e546e0e4d674dab265d6e2.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","open-science","climate-science","datatree"],"level":3},{"slug":"blog.2022.pint-xarray","title":"Unit-aware arithmetic in Xarray, via pint","description":"All scientific computations involve units, so let's make our analysis software aware of them.\n","date":"2022-08-30","thumbnail":"/build/df49524368335f9010ca432f9849200d.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","xarray","pint","open-science","physical-units"],"level":3},{"level":2,"title":"2020"},{"slug":"blog.2020.covid19-model","title":"Coronavirus: The Simplest Model","description":"Solving the simplest possible epidemiological model of the spread of COVID-19.\n","date":"2020-03-20","thumbnail":"/build/SIRD_states-6497527278df07e7cd2669ebaeafb6cc.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["code","python","modelling","covid-19"],"level":3},{"slug":"blog.2020.deep-pseudoscience","title":"The faulty science, doomism, and flawed conclusions of Deep Adaptation","description":"Calling out pseudoscience claiming that societal collapse due to climate change is inevitable. \n","date":"2020-07-14","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate-science","misinformation"],"level":3},{"slug":"blog.2020.oxford-divests","title":"Oxford University Divestment Explained","description":"Thought's on Oxford University's fossil fuel divestment motion.\n","date":"2020-04-22","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["climate","oxford"],"level":3},{"level":2,"title":"2019"},{"slug":"blog.2019.theconversation-fusion","title":"Nuclear Fusion: too late for the climate","description":"Don't let politicians use funding for nuclear fusion research as greenwashing.\n","date":"2019-09-30","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["fusion","energy","climate"],"level":3}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/build/manifest-B4831781.js";
import * as route0 from "/build/root-QGLRP2PL.js";
import * as route1 from "/build/routes/$-7JYT5576.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/build/entry.client-UNPC4GT3.js");</script></body></html>